var Ut=Object.create;var kn=Object.defineProperty;var Pt=Object.getOwnPropertyDescriptor;var St=Object.getOwnPropertyNames;var wt=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var Dn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Lt=(n,e,t,u)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of St(e))!Et.call(n,f)&&f!==t&&kn(n,f,{get:()=>e[f],enumerable:!(u=Pt(e,f))||u.enumerable});return n};var ae=(n,e,t)=>(t=n!=null?Ut(wt(n)):{},Lt(e||!n||!n.__esModule?kn(t,"default",{value:n,enumerable:!0}):t,n));var ce=Dn(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.Type=a.JsonType=a.JavaScriptTypeBuilder=a.JsonTypeBuilder=a.TypeBuilder=a.TypeBuilderError=a.TransformEncodeBuilder=a.TransformDecodeBuilder=a.TemplateLiteralDslParser=a.TemplateLiteralGenerator=a.TemplateLiteralGeneratorError=a.TemplateLiteralFinite=a.TemplateLiteralFiniteError=a.TemplateLiteralParser=a.TemplateLiteralParserError=a.TemplateLiteralResolver=a.TemplateLiteralPattern=a.TemplateLiteralPatternError=a.UnionResolver=a.KeyArrayResolver=a.KeyArrayResolverError=a.KeyResolver=a.ObjectMap=a.Intrinsic=a.IndexedAccessor=a.TypeClone=a.TypeExtends=a.TypeExtendsResult=a.TypeExtendsError=a.ExtendsUndefined=a.TypeGuard=a.TypeGuardUnknownTypeError=a.ValueGuard=a.FormatRegistry=a.TypeBoxError=a.TypeRegistry=a.PatternStringExact=a.PatternNumberExact=a.PatternBooleanExact=a.PatternString=a.PatternNumber=a.PatternBoolean=a.Kind=a.Hint=a.Optional=a.Readonly=a.Transform=void 0;a.Transform=Symbol.for("TypeBox.Transform");a.Readonly=Symbol.for("TypeBox.Readonly");a.Optional=Symbol.for("TypeBox.Optional");a.Hint=Symbol.for("TypeBox.Hint");a.Kind=Symbol.for("TypeBox.Kind");a.PatternBoolean="(true|false)";a.PatternNumber="(0|[1-9][0-9]*)";a.PatternString="(.*)";a.PatternBooleanExact=`^${a.PatternBoolean}$`;a.PatternNumberExact=`^${a.PatternNumber}$`;a.PatternStringExact=`^${a.PatternString}$`;var Rn;(function(n){let e=new Map;function t(){return new Map(e)}n.Entries=t;function u(){return e.clear()}n.Clear=u;function f(d){return e.delete(d)}n.Delete=f;function c(d){return e.has(d)}n.Has=c;function l(d,m){e.set(d,m)}n.Set=l;function p(d){return e.get(d)}n.Get=p})(Rn||(a.TypeRegistry=Rn={}));var W=class extends Error{constructor(e){super(e)}};a.TypeBoxError=W;var Mn;(function(n){let e=new Map;function t(){return new Map(e)}n.Entries=t;function u(){return e.clear()}n.Clear=u;function f(d){return e.delete(d)}n.Delete=f;function c(d){return e.has(d)}n.Has=c;function l(d,m){e.set(d,m)}n.Set=l;function p(d){return e.get(d)}n.Get=p})(Mn||(a.FormatRegistry=Mn={}));var v;(function(n){function e(b){return Array.isArray(b)}n.IsArray=e;function t(b){return typeof b=="bigint"}n.IsBigInt=t;function u(b){return typeof b=="boolean"}n.IsBoolean=u;function f(b){return b instanceof globalThis.Date}n.IsDate=f;function c(b){return b===null}n.IsNull=c;function l(b){return typeof b=="number"}n.IsNumber=l;function p(b){return typeof b=="object"&&b!==null}n.IsObject=p;function d(b){return typeof b=="string"}n.IsString=d;function m(b){return b instanceof globalThis.Uint8Array}n.IsUint8Array=m;function I(b){return b===void 0}n.IsUndefined=I})(v||(a.ValueGuard=v={}));var An=class extends W{};a.TypeGuardUnknownTypeError=An;var s;(function(n){function e(o){try{return new RegExp(o),!0}catch{return!1}}function t(o){if(!v.IsString(o))return!1;for(let C=0;C<o.length;C++){let H=o.charCodeAt(C);if(H>=7&&H<=13||H===27||H===127)return!1}return!0}function u(o){return l(o)||M(o)}function f(o){return v.IsUndefined(o)||v.IsBigInt(o)}function c(o){return v.IsUndefined(o)||v.IsNumber(o)}function l(o){return v.IsUndefined(o)||v.IsBoolean(o)}function p(o){return v.IsUndefined(o)||v.IsString(o)}function d(o){return v.IsUndefined(o)||v.IsString(o)&&t(o)&&e(o)}function m(o){return v.IsUndefined(o)||v.IsString(o)&&t(o)}function I(o){return v.IsUndefined(o)||M(o)}function b(o){return w(o,"Any")&&p(o.$id)}n.TAny=b;function P(o){return w(o,"Array")&&o.type==="array"&&p(o.$id)&&M(o.items)&&c(o.minItems)&&c(o.maxItems)&&l(o.uniqueItems)&&I(o.contains)&&c(o.minContains)&&c(o.maxContains)}n.TArray=P;function y(o){return w(o,"AsyncIterator")&&o.type==="AsyncIterator"&&p(o.$id)&&M(o.items)}n.TAsyncIterator=y;function O(o){return w(o,"BigInt")&&o.type==="bigint"&&p(o.$id)&&f(o.exclusiveMaximum)&&f(o.exclusiveMinimum)&&f(o.maximum)&&f(o.minimum)&&f(o.multipleOf)}n.TBigInt=O;function S(o){return w(o,"Boolean")&&o.type==="boolean"&&p(o.$id)}n.TBoolean=S;function E(o){return w(o,"Constructor")&&o.type==="Constructor"&&p(o.$id)&&v.IsArray(o.parameters)&&o.parameters.every(C=>M(C))&&M(o.returns)}n.TConstructor=E;function R(o){return w(o,"Date")&&o.type==="Date"&&p(o.$id)&&c(o.exclusiveMaximumTimestamp)&&c(o.exclusiveMinimumTimestamp)&&c(o.maximumTimestamp)&&c(o.minimumTimestamp)&&c(o.multipleOfTimestamp)}n.TDate=R;function L(o){return w(o,"Function")&&o.type==="Function"&&p(o.$id)&&v.IsArray(o.parameters)&&o.parameters.every(C=>M(C))&&M(o.returns)}n.TFunction=L;function N(o){return w(o,"Integer")&&o.type==="integer"&&p(o.$id)&&c(o.exclusiveMaximum)&&c(o.exclusiveMinimum)&&c(o.maximum)&&c(o.minimum)&&c(o.multipleOf)}n.TInteger=N;function k(o){return w(o,"Intersect")&&!(v.IsString(o.type)&&o.type!=="object")&&v.IsArray(o.allOf)&&o.allOf.every(C=>M(C)&&!Ee(C))&&p(o.type)&&(l(o.unevaluatedProperties)||I(o.unevaluatedProperties))&&p(o.$id)}n.TIntersect=k;function ee(o){return w(o,"Iterator")&&o.type==="Iterator"&&p(o.$id)&&M(o.items)}n.TIterator=ee;function w(o,C){return ie(o)&&o[a.Kind]===C}n.TKindOf=w;function ie(o){return v.IsObject(o)&&a.Kind in o&&v.IsString(o[a.Kind])}n.TKind=ie;function Y(o){return ne(o)&&v.IsString(o.const)}n.TLiteralString=Y;function De(o){return ne(o)&&v.IsNumber(o.const)}n.TLiteralNumber=De;function Un(o){return ne(o)&&v.IsBoolean(o.const)}n.TLiteralBoolean=Un;function ne(o){return w(o,"Literal")&&p(o.$id)&&(v.IsBoolean(o.const)||v.IsNumber(o.const)||v.IsString(o.const))}n.TLiteral=ne;function Me(o){return w(o,"Never")&&v.IsObject(o.not)&&Object.getOwnPropertyNames(o.not).length===0}n.TNever=Me;function z(o){return w(o,"Not")&&M(o.not)}n.TNot=z;function Pe(o){return w(o,"Null")&&o.type==="null"&&p(o.$id)}n.TNull=Pe;function Se(o){return w(o,"Number")&&o.type==="number"&&p(o.$id)&&c(o.exclusiveMaximum)&&c(o.exclusiveMinimum)&&c(o.maximum)&&c(o.minimum)&&c(o.multipleOf)}n.TNumber=Se;function de(o){return w(o,"Object")&&o.type==="object"&&p(o.$id)&&v.IsObject(o.properties)&&u(o.additionalProperties)&&c(o.minProperties)&&c(o.maxProperties)&&Object.entries(o.properties).every(([C,H])=>t(C)&&M(H))}n.TObject=de;function we(o){return w(o,"Promise")&&o.type==="Promise"&&p(o.$id)&&M(o.item)}n.TPromise=we;function ze(o){return w(o,"Record")&&o.type==="object"&&p(o.$id)&&u(o.additionalProperties)&&v.IsObject(o.patternProperties)&&(C=>{let H=Object.getOwnPropertyNames(C.patternProperties);return H.length===1&&e(H[0])&&v.IsObject(C.patternProperties)&&M(C.patternProperties[H[0]])})(o)}n.TRecord=ze;function Pn(o){return v.IsObject(o)&&a.Hint in o&&o[a.Hint]==="Recursive"}n.TRecursive=Pn;function qe(o){return w(o,"Ref")&&p(o.$id)&&v.IsString(o.$ref)}n.TRef=qe;function _e(o){return w(o,"String")&&o.type==="string"&&p(o.$id)&&c(o.minLength)&&c(o.maxLength)&&d(o.pattern)&&m(o.format)}n.TString=_e;function Ve(o){return w(o,"Symbol")&&o.type==="symbol"&&p(o.$id)}n.TSymbol=Ve;function oe(o){return w(o,"TemplateLiteral")&&o.type==="string"&&v.IsString(o.pattern)&&o.pattern[0]==="^"&&o.pattern[o.pattern.length-1]==="$"}n.TTemplateLiteral=oe;function He(o){return w(o,"This")&&p(o.$id)&&v.IsString(o.$ref)}n.TThis=He;function Ee(o){return v.IsObject(o)&&a.Transform in o}n.TTransform=Ee;function D(o){return w(o,"Tuple")&&o.type==="array"&&p(o.$id)&&v.IsNumber(o.minItems)&&v.IsNumber(o.maxItems)&&o.minItems===o.maxItems&&(v.IsUndefined(o.items)&&v.IsUndefined(o.additionalItems)&&o.minItems===0||v.IsArray(o.items)&&o.items.every(C=>M(C)))}n.TTuple=D;function Je(o){return w(o,"Undefined")&&o.type==="undefined"&&p(o.$id)}n.TUndefined=Je;function Sn(o){return ue(o)&&o.anyOf.every(C=>Y(C)||De(C))}n.TUnionLiteral=Sn;function ue(o){return w(o,"Union")&&p(o.$id)&&v.IsObject(o)&&v.IsArray(o.anyOf)&&o.anyOf.every(C=>M(C))}n.TUnion=ue;function ye(o){return w(o,"Uint8Array")&&o.type==="Uint8Array"&&p(o.$id)&&c(o.minByteLength)&&c(o.maxByteLength)}n.TUint8Array=ye;function q(o){return w(o,"Unknown")&&p(o.$id)}n.TUnknown=q;function Ze(o){return w(o,"Unsafe")}n.TUnsafe=Ze;function Le(o){return w(o,"Void")&&o.type==="void"&&p(o.$id)}n.TVoid=Le;function wn(o){return v.IsObject(o)&&o[a.Readonly]==="Readonly"}n.TReadonly=wn;function En(o){return v.IsObject(o)&&o[a.Optional]==="Optional"}n.TOptional=En;function M(o){return v.IsObject(o)&&(b(o)||P(o)||S(o)||O(o)||y(o)||E(o)||R(o)||L(o)||N(o)||k(o)||ee(o)||ne(o)||Me(o)||z(o)||Pe(o)||Se(o)||de(o)||we(o)||ze(o)||qe(o)||_e(o)||Ve(o)||oe(o)||He(o)||D(o)||Je(o)||ue(o)||ye(o)||q(o)||Ze(o)||Le(o)||ie(o)&&Rn.Has(o[a.Kind]))}n.TSchema=M})(s||(a.TypeGuard=s={}));var zn;(function(n){function e(t){return t[a.Kind]==="Intersect"?t.allOf.every(u=>e(u)):t[a.Kind]==="Union"?t.anyOf.some(u=>e(u)):t[a.Kind]==="Undefined"?!0:t[a.Kind]==="Not"?!e(t.not):!1}n.Check=e})(zn||(a.ExtendsUndefined=zn={}));var We=class extends W{};a.TypeExtendsError=We;var T;(function(n){n[n.Union=0]="Union",n[n.True=1]="True",n[n.False=2]="False"})(T||(a.TypeExtendsResult=T={}));var se;(function(n){function e(r){return r===T.False?r:T.True}function t(r){throw new We(r)}function u(r){return s.TNever(r)||s.TIntersect(r)||s.TUnion(r)||s.TUnknown(r)||s.TAny(r)}function f(r,i){return s.TNever(i)?w(r,i):s.TIntersect(i)?L(r,i):s.TUnion(i)?Ln(r,i):s.TUnknown(i)?Kn(r,i):s.TAny(i)?c(r,i):t("StructuralRight")}function c(r,i){return T.True}function l(r,i){return s.TIntersect(i)?L(r,i):s.TUnion(i)&&i.anyOf.some(A=>s.TAny(A)||s.TUnknown(A))?T.True:s.TUnion(i)?T.Union:s.TUnknown(i)||s.TAny(i)?T.True:T.Union}function p(r,i){return s.TUnknown(r)?T.False:s.TAny(r)?T.Union:s.TNever(r)?T.True:T.False}function d(r,i){return s.TObject(i)&&oe(i)?T.True:u(i)?f(r,i):s.TArray(i)?e(j(r.items,i.items)):T.False}function m(r,i){return u(i)?f(r,i):s.TAsyncIterator(i)?e(j(r.items,i.items)):T.False}function I(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TBigInt(i)?T.True:T.False}function b(r,i){return s.TLiteral(r)&&v.IsBoolean(r.const)||s.TBoolean(r)?T.True:T.False}function P(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TBoolean(i)?T.True:T.False}function y(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TConstructor(i)?r.parameters.length>i.parameters.length?T.False:r.parameters.every((A,Z)=>e(j(i.parameters[Z],A))===T.True)?e(j(r.returns,i.returns)):T.False:T.False}function O(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TDate(i)?T.True:T.False}function S(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TFunction(i)?r.parameters.length>i.parameters.length?T.False:r.parameters.every((A,Z)=>e(j(i.parameters[Z],A))===T.True)?e(j(r.returns,i.returns)):T.False:T.False}function E(r,i){return s.TLiteral(r)&&v.IsNumber(r.const)||s.TNumber(r)||s.TInteger(r)?T.True:T.False}function R(r,i){return s.TInteger(i)||s.TNumber(i)?T.True:u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):T.False}function L(r,i){return i.allOf.every(A=>j(r,A)===T.True)?T.True:T.False}function N(r,i){return r.allOf.some(A=>j(A,i)===T.True)?T.True:T.False}function k(r,i){return u(i)?f(r,i):s.TIterator(i)?e(j(r.items,i.items)):T.False}function ee(r,i){return s.TLiteral(i)&&i.const===r.const?T.True:u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TString(i)?Le(r,i):s.TNumber(i)?ne(r,i):s.TInteger(i)?E(r,i):s.TBoolean(i)?b(r,i):T.False}function w(r,i){return T.False}function ie(r,i){return T.True}function Y(r){let[i,A]=[r,0];for(;s.TNot(i);)i=i.not,A+=1;return A%2===0?i:a.Type.Unknown()}function De(r,i){return s.TNot(r)?j(Y(r),i):s.TNot(i)?j(r,Y(i)):t("Invalid fallthrough for Not")}function Un(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TNull(i)?T.True:T.False}function ne(r,i){return s.TLiteralNumber(r)||s.TNumber(r)||s.TInteger(r)?T.True:T.False}function Me(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TInteger(i)||s.TNumber(i)?T.True:T.False}function z(r,i){return Object.getOwnPropertyNames(r.properties).length===i}function Pe(r){return oe(r)}function Se(r){return z(r,0)||z(r,1)&&"description"in r.properties&&s.TUnion(r.properties.description)&&r.properties.description.anyOf.length===2&&(s.TString(r.properties.description.anyOf[0])&&s.TUndefined(r.properties.description.anyOf[1])||s.TString(r.properties.description.anyOf[1])&&s.TUndefined(r.properties.description.anyOf[0]))}function de(r){return z(r,0)}function we(r){return z(r,0)}function ze(r){return z(r,0)}function Pn(r){return z(r,0)}function qe(r){return oe(r)}function _e(r){let i=a.Type.Number();return z(r,0)||z(r,1)&&"length"in r.properties&&e(j(r.properties.length,i))===T.True}function Ve(r){return z(r,0)}function oe(r){let i=a.Type.Number();return z(r,0)||z(r,1)&&"length"in r.properties&&e(j(r.properties.length,i))===T.True}function He(r){let i=a.Type.Function([a.Type.Any()],a.Type.Any());return z(r,0)||z(r,1)&&"then"in r.properties&&e(j(r.properties.then,i))===T.True}function Ee(r,i){return j(r,i)===T.False||s.TOptional(r)&&!s.TOptional(i)?T.False:T.True}function D(r,i){return s.TUnknown(r)?T.False:s.TAny(r)?T.Union:s.TNever(r)||s.TLiteralString(r)&&Pe(i)||s.TLiteralNumber(r)&&de(i)||s.TLiteralBoolean(r)&&we(i)||s.TSymbol(r)&&Se(i)||s.TBigInt(r)&&ze(i)||s.TString(r)&&Pe(i)||s.TSymbol(r)&&Se(i)||s.TNumber(r)&&de(i)||s.TInteger(r)&&de(i)||s.TBoolean(r)&&we(i)||s.TUint8Array(r)&&qe(i)||s.TDate(r)&&Pn(i)||s.TConstructor(r)&&Ve(i)||s.TFunction(r)&&_e(i)?T.True:s.TRecord(r)&&s.TString(ue(r))?i[a.Hint]==="Record"?T.True:T.False:s.TRecord(r)&&s.TNumber(ue(r))?z(i,0)?T.True:T.False:T.False}function Je(r,i){return u(i)?f(r,i):s.TRecord(i)?q(r,i):s.TObject(i)?(()=>{for(let A of Object.getOwnPropertyNames(i.properties)){if(!(A in r.properties)&&!s.TOptional(i.properties[A]))return T.False;if(s.TOptional(i.properties[A]))return T.True;if(Ee(r.properties[A],i.properties[A])===T.False)return T.False}return T.True})():T.False}function Sn(r,i){return u(i)?f(r,i):s.TObject(i)&&He(i)?T.True:s.TPromise(i)?e(j(r.item,i.item)):T.False}function ue(r){return a.PatternNumberExact in r.patternProperties?a.Type.Number():a.PatternStringExact in r.patternProperties?a.Type.String():t("Unknown record key pattern")}function ye(r){return a.PatternNumberExact in r.patternProperties?r.patternProperties[a.PatternNumberExact]:a.PatternStringExact in r.patternProperties?r.patternProperties[a.PatternStringExact]:t("Unable to get record value schema")}function q(r,i){let[A,Z]=[ue(i),ye(i)];return s.TLiteralString(r)&&s.TNumber(A)&&e(j(r,Z))===T.True?T.True:s.TUint8Array(r)&&s.TNumber(A)||s.TString(r)&&s.TNumber(A)||s.TArray(r)&&s.TNumber(A)?j(r,Z):s.TObject(r)?(()=>{for(let xt of Object.getOwnPropertyNames(r.properties))if(Ee(Z,r.properties[xt])===T.False)return T.False;return T.True})():T.False}function Ze(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?j(ye(r),ye(i)):T.False}function Le(r,i){return s.TLiteral(r)&&v.IsString(r.const)||s.TString(r)?T.True:T.False}function wn(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TString(i)?T.True:T.False}function En(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TSymbol(i)?T.True:T.False}function M(r,i){return s.TTemplateLiteral(r)?j(G.Resolve(r),i):s.TTemplateLiteral(i)?j(r,G.Resolve(i)):t("Invalid fallthrough for TemplateLiteral")}function o(r,i){return s.TArray(i)&&r.items!==void 0&&r.items.every(A=>j(A,i.items)===T.True)}function C(r,i){return s.TNever(r)?T.True:s.TUnknown(r)?T.False:s.TAny(r)?T.Union:T.False}function H(r,i){return u(i)?f(r,i):s.TObject(i)&&oe(i)||s.TArray(i)&&o(r,i)?T.True:s.TTuple(i)?v.IsUndefined(r.items)&&!v.IsUndefined(i.items)||!v.IsUndefined(r.items)&&v.IsUndefined(i.items)?T.False:v.IsUndefined(r.items)&&!v.IsUndefined(i.items)||r.items.every((A,Z)=>j(A,i.items[Z])===T.True)?T.True:T.False:T.False}function yt(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TUint8Array(i)?T.True:T.False}function mt(r,i){return u(i)?f(r,i):s.TObject(i)?D(r,i):s.TRecord(i)?q(r,i):s.TVoid(i)?bt(r,i):s.TUndefined(i)?T.True:T.False}function Ln(r,i){return i.anyOf.some(A=>j(r,A)===T.True)?T.True:T.False}function gt(r,i){return r.anyOf.every(A=>j(A,i)===T.True)?T.True:T.False}function Kn(r,i){return T.True}function vt(r,i){return s.TNever(i)?w(r,i):s.TIntersect(i)?L(r,i):s.TUnion(i)?Ln(r,i):s.TAny(i)?c(r,i):s.TString(i)?Le(r,i):s.TNumber(i)?ne(r,i):s.TInteger(i)?E(r,i):s.TBoolean(i)?b(r,i):s.TArray(i)?p(r,i):s.TTuple(i)?C(r,i):s.TObject(i)?D(r,i):s.TUnknown(i)?T.True:T.False}function bt(r,i){return s.TUndefined(r)||s.TUndefined(r)?T.True:T.False}function It(r,i){return s.TIntersect(i)?L(r,i):s.TUnion(i)?Ln(r,i):s.TUnknown(i)?Kn(r,i):s.TAny(i)?c(r,i):s.TObject(i)?D(r,i):s.TVoid(i)?T.True:T.False}function j(r,i){return s.TTemplateLiteral(r)||s.TTemplateLiteral(i)?M(r,i):s.TNot(r)||s.TNot(i)?De(r,i):s.TAny(r)?l(r,i):s.TArray(r)?d(r,i):s.TBigInt(r)?I(r,i):s.TBoolean(r)?P(r,i):s.TAsyncIterator(r)?m(r,i):s.TConstructor(r)?y(r,i):s.TDate(r)?O(r,i):s.TFunction(r)?S(r,i):s.TInteger(r)?R(r,i):s.TIntersect(r)?N(r,i):s.TIterator(r)?k(r,i):s.TLiteral(r)?ee(r,i):s.TNever(r)?ie(r,i):s.TNull(r)?Un(r,i):s.TNumber(r)?Me(r,i):s.TObject(r)?Je(r,i):s.TRecord(r)?Ze(r,i):s.TString(r)?wn(r,i):s.TSymbol(r)?En(r,i):s.TTuple(r)?H(r,i):s.TPromise(r)?Sn(r,i):s.TUint8Array(r)?yt(r,i):s.TUndefined(r)?mt(r,i):s.TUnion(r)?gt(r,i):s.TUnknown(r)?vt(r,i):s.TVoid(r)?It(r,i):t(`Unknown left type operand '${r[a.Kind]}'`)}function Ot(r,i){return j(r,i)}n.Extends=Ot})(se||(a.TypeExtends=se={}));var x;(function(n){function e(d){return d.map(m=>c(m))}function t(d){return new Date(d.getTime())}function u(d){return new Uint8Array(d)}function f(d){let m=Object.getOwnPropertyNames(d).reduce((b,P)=>({...b,[P]:c(d[P])}),{}),I=Object.getOwnPropertySymbols(d).reduce((b,P)=>({...b,[P]:c(d[P])}),{});return{...m,...I}}function c(d){return v.IsArray(d)?e(d):v.IsDate(d)?t(d):v.IsUint8Array(d)?u(d):v.IsObject(d)?f(d):d}function l(d){return d.map(m=>p(m))}n.Rest=l;function p(d,m={}){return{...c(d),...m}}n.Type=p})(x||(a.TypeClone=x={}));var Nn;(function(n){function e(y){return y.map(O=>{let{[a.Optional]:S,...E}=x.Type(O);return E})}function t(y){return y.every(O=>s.TOptional(O))}function u(y){return y.some(O=>s.TOptional(O))}function f(y){return t(y.allOf)?a.Type.Optional(a.Type.Intersect(e(y.allOf))):y}function c(y){return u(y.anyOf)?a.Type.Optional(a.Type.Union(e(y.anyOf))):y}function l(y){return y[a.Kind]==="Intersect"?f(y):y[a.Kind]==="Union"?c(y):y}function p(y,O){let S=y.allOf.reduce((E,R)=>{let L=b(R,O);return L[a.Kind]==="Never"?E:[...E,L]},[]);return l(a.Type.Intersect(S))}function d(y,O){let S=y.anyOf.map(E=>b(E,O));return l(a.Type.Union(S))}function m(y,O){let S=y.properties[O];return v.IsUndefined(S)?a.Type.Never():a.Type.Union([S])}function I(y,O){let S=y.items;if(v.IsUndefined(S))return a.Type.Never();let E=S[O];return v.IsUndefined(E)?a.Type.Never():E}function b(y,O){return y[a.Kind]==="Intersect"?p(y,O):y[a.Kind]==="Union"?d(y,O):y[a.Kind]==="Object"?m(y,O):y[a.Kind]==="Tuple"?I(y,O):a.Type.Never()}function P(y,O,S={}){let E=O.map(R=>b(y,R.toString()));return l(a.Type.Union(E,S))}n.Resolve=P})(Nn||(a.IndexedAccessor=Nn={}));var me;(function(n){function e(I){let[b,P]=[I.slice(0,1),I.slice(1)];return`${b.toLowerCase()}${P}`}function t(I){let[b,P]=[I.slice(0,1),I.slice(1)];return`${b.toUpperCase()}${P}`}function u(I){return I.toUpperCase()}function f(I){return I.toLowerCase()}function c(I,b){let P=ve.ParseExact(I.pattern);if(!be.Check(P))return{...I,pattern:l(I.pattern,b)};let S=[...Ie.Generate(P)].map(L=>a.Type.Literal(L)),E=p(S,b),R=a.Type.Union(E);return a.Type.TemplateLiteral([R])}function l(I,b){return typeof I=="string"?b==="Uncapitalize"?e(I):b==="Capitalize"?t(I):b==="Uppercase"?u(I):b==="Lowercase"?f(I):I:I.toString()}function p(I,b){if(I.length===0)return[];let[P,...y]=I;return[m(P,b),...p(y,b)]}function d(I,b){return s.TTemplateLiteral(I)?c(I,b):s.TUnion(I)?a.Type.Union(p(I.anyOf,b)):s.TLiteral(I)?a.Type.Literal(l(I.const,b)):I}function m(I,b){return d(I,b)}n.Map=m})(me||(a.Intrinsic=me={}));var ge;(function(n){function e(l,p){return a.Type.Intersect(l.allOf.map(d=>f(d,p)),{...l})}function t(l,p){return a.Type.Union(l.anyOf.map(d=>f(d,p)),{...l})}function u(l,p){return p(l)}function f(l,p){return l[a.Kind]==="Intersect"?e(l,p):l[a.Kind]==="Union"?t(l,p):l[a.Kind]==="Object"?u(l,p):l}function c(l,p,d){return{...f(x.Type(l),p),...d}}n.Map=c})(ge||(a.ObjectMap=ge={}));var Xe;(function(n){function e(m){return m[0]==="^"&&m[m.length-1]==="$"?m.slice(1,m.length-1):m}function t(m,I){return m.allOf.reduce((b,P)=>[...b,...l(P,I)],[])}function u(m,I){let b=m.anyOf.map(P=>l(P,I));return[...b.reduce((P,y)=>y.map(O=>b.every(S=>S.includes(O))?P.add(O):P)[0],new Set)]}function f(m,I){return Object.getOwnPropertyNames(m.properties)}function c(m,I){return I.includePatterns?Object.getOwnPropertyNames(m.patternProperties):[]}function l(m,I){return s.TIntersect(m)?t(m,I):s.TUnion(m)?u(m,I):s.TObject(m)?f(m,I):s.TRecord(m)?c(m,I):[]}function p(m,I){return[...new Set(l(m,I))]}n.ResolveKeys=p;function d(m){return`^(${p(m,{includePatterns:!0}).map(P=>`(${e(P)})`).join("|")})$`}n.ResolvePattern=d})(Xe||(a.KeyResolver=Xe={}));var Qe=class extends W{};a.KeyArrayResolverError=Qe;var Re;(function(n){function e(t){return Array.isArray(t)?t:s.TUnionLiteral(t)?t.anyOf.map(u=>u.const.toString()):s.TLiteral(t)?[t.const]:s.TTemplateLiteral(t)?(()=>{let u=ve.ParseExact(t.pattern);if(!be.Check(u))throw new Qe("Cannot resolve keys from infinite template expression");return[...Ie.Generate(u)]})():[]}n.Resolve=e})(Re||(a.KeyArrayResolver=Re={}));var Bn;(function(n){function*e(u){for(let f of u.anyOf)f[a.Kind]==="Union"?yield*e(f):yield f}function t(u){return a.Type.Union([...e(u)],{...u})}n.Resolve=t})(Bn||(a.UnionResolver=Bn={}));var Ye=class extends W{};a.TemplateLiteralPatternError=Ye;var Ge;(function(n){function e(c){throw new Ye(c)}function t(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function u(c,l){return s.TTemplateLiteral(c)?c.pattern.slice(1,c.pattern.length-1):s.TUnion(c)?`(${c.anyOf.map(p=>u(p,l)).join("|")})`:s.TNumber(c)?`${l}${a.PatternNumber}`:s.TInteger(c)?`${l}${a.PatternNumber}`:s.TBigInt(c)?`${l}${a.PatternNumber}`:s.TString(c)?`${l}${a.PatternString}`:s.TLiteral(c)?`${l}${t(c.const.toString())}`:s.TBoolean(c)?`${l}${a.PatternBoolean}`:e(`Unexpected Kind '${c[a.Kind]}'`)}function f(c){return`^${c.map(l=>u(l,"")).join("")}$`}n.Create=f})(Ge||(a.TemplateLiteralPattern=Ge={}));var G;(function(n){function e(t){let u=ve.ParseExact(t.pattern);if(!be.Check(u))return a.Type.String();let f=[...Ie.Generate(u)].map(c=>a.Type.Literal(c));return a.Type.Union(f)}n.Resolve=e})(G||(a.TemplateLiteralResolver=G={}));var Ae=class extends W{};a.TemplateLiteralParserError=Ae;var ve;(function(n){function e(y,O,S){return y[O]===S&&y.charCodeAt(O-1)!==92}function t(y,O){return e(y,O,"(")}function u(y,O){return e(y,O,")")}function f(y,O){return e(y,O,"|")}function c(y){if(!(t(y,0)&&u(y,y.length-1)))return!1;let O=0;for(let S=0;S<y.length;S++)if(t(y,S)&&(O+=1),u(y,S)&&(O-=1),O===0&&S!==y.length-1)return!1;return!0}function l(y){return y.slice(1,y.length-1)}function p(y){let O=0;for(let S=0;S<y.length;S++)if(t(y,S)&&(O+=1),u(y,S)&&(O-=1),f(y,S)&&O===0)return!0;return!1}function d(y){for(let O=0;O<y.length;O++)if(t(y,O))return!0;return!1}function m(y){let[O,S]=[0,0],E=[];for(let L=0;L<y.length;L++)if(t(y,L)&&(O+=1),u(y,L)&&(O-=1),f(y,L)&&O===0){let N=y.slice(S,L);N.length>0&&E.push(b(N)),S=L+1}let R=y.slice(S);return R.length>0&&E.push(b(R)),E.length===0?{type:"const",const:""}:E.length===1?E[0]:{type:"or",expr:E}}function I(y){function O(R,L){if(!t(R,L))throw new Ae("TemplateLiteralParser: Index must point to open parens");let N=0;for(let k=L;k<R.length;k++)if(t(R,k)&&(N+=1),u(R,k)&&(N-=1),N===0)return[L,k];throw new Ae("TemplateLiteralParser: Unclosed group parens in expression")}function S(R,L){for(let N=L;N<R.length;N++)if(t(R,N))return[L,N];return[L,R.length]}let E=[];for(let R=0;R<y.length;R++)if(t(y,R)){let[L,N]=O(y,R),k=y.slice(L,N+1);E.push(b(k)),R=N}else{let[L,N]=S(y,R),k=y.slice(L,N);k.length>0&&E.push(b(k)),R=N-1}return E.length===0?{type:"const",const:""}:E.length===1?E[0]:{type:"and",expr:E}}function b(y){return c(y)?b(l(y)):p(y)?m(y):d(y)?I(y):{type:"const",const:y}}n.Parse=b;function P(y){return b(y.slice(1,y.length-1))}n.ParseExact=P})(ve||(a.TemplateLiteralParser=ve={}));var he=class extends W{};a.TemplateLiteralFiniteError=he;var be;(function(n){function e(l){throw new he(l)}function t(l){return l.type==="or"&&l.expr.length===2&&l.expr[0].type==="const"&&l.expr[0].const==="0"&&l.expr[1].type==="const"&&l.expr[1].const==="[1-9][0-9]*"}function u(l){return l.type==="or"&&l.expr.length===2&&l.expr[0].type==="const"&&l.expr[0].const==="true"&&l.expr[1].type==="const"&&l.expr[1].const==="false"}function f(l){return l.type==="const"&&l.const===".*"}function c(l){return u(l)?!0:t(l)||f(l)?!1:l.type==="and"?l.expr.every(p=>c(p)):l.type==="or"?l.expr.every(p=>c(p)):l.type==="const"?!0:e("Unknown expression type")}n.Check=c})(be||(a.TemplateLiteralFinite=be={}));var en=class extends W{};a.TemplateLiteralGeneratorError=en;var Ie;(function(n){function*e(l){if(l.length===1)return yield*l[0];for(let p of l[0])for(let d of e(l.slice(1)))yield`${p}${d}`}function*t(l){return yield*e(l.expr.map(p=>[...c(p)]))}function*u(l){for(let p of l.expr)yield*c(p)}function*f(l){return yield l.const}function*c(l){return l.type==="and"?yield*t(l):l.type==="or"?yield*u(l):l.type==="const"?yield*f(l):(()=>{throw new en("Unknown expression")})()}n.Generate=c})(Ie||(a.TemplateLiteralGenerator=Ie={}));var jn;(function(n){function*e(c){let l=c.trim().replace(/"|'/g,"");return l==="boolean"?yield a.Type.Boolean():l==="number"?yield a.Type.Number():l==="bigint"?yield a.Type.BigInt():l==="string"?yield a.Type.String():yield(()=>{let p=l.split("|").map(d=>a.Type.Literal(d.trim()));return p.length===0?a.Type.Never():p.length===1?p[0]:a.Type.Union(p)})()}function*t(c){if(c[1]!=="{"){let l=a.Type.Literal("$"),p=u(c.slice(1));return yield*[l,...p]}for(let l=2;l<c.length;l++)if(c[l]==="}"){let p=e(c.slice(2,l)),d=u(c.slice(l+1));return yield*[...p,...d]}yield a.Type.Literal(c)}function*u(c){for(let l=0;l<c.length;l++)if(c[l]==="$"){let p=a.Type.Literal(c.slice(0,l)),d=t(c.slice(l));return yield*[p,...d]}yield a.Type.Literal(c)}function f(c){return[...u(c)]}n.Parse=f})(jn||(a.TemplateLiteralDslParser=jn={}));var nn=class{constructor(e){this.schema=e}Decode(e){return new tn(this.schema,e)}};a.TransformDecodeBuilder=nn;var tn=class{constructor(e,t){this.schema=e,this.decode=t}Encode(e){let t=x.Type(this.schema);return s.TTransform(t)?(()=>{let c={Encode:l=>t[a.Transform].Encode(e(l)),Decode:l=>this.decode(t[a.Transform].Decode(l))};return{...t,[a.Transform]:c}})():(()=>{let u={Decode:this.decode,Encode:e};return{...t,[a.Transform]:u}})()}};a.TransformEncodeBuilder=tn;var Rt=0,rn=class extends W{};a.TypeBuilderError=rn;var on=class{Create(e){return e}Throw(e){throw new rn(e)}Discard(e,t){return t.reduce((u,f)=>{let{[f]:c,...l}=u;return l},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};a.TypeBuilder=on;var Ne=class extends on{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...x.Type(e),[a.Readonly]:"Readonly"}}Optional(e){return{...x.Type(e),[a.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[a.Kind]:"Any"})}Array(e,t={}){return this.Create({...t,[a.Kind]:"Array",type:"array",items:x.Type(e)})}Boolean(e={}){return this.Create({...e,[a.Kind]:"Boolean",type:"boolean"})}Capitalize(e,t={}){return{...me.Map(x.Type(e),"Capitalize"),...t}}Composite(e,t){let u=a.Type.Intersect(e,{}),c=Xe.ResolveKeys(u,{includePatterns:!1}).reduce((l,p)=>({...l,[p]:a.Type.Index(u,[p])}),{});return a.Type.Object(c,t)}Enum(e,t={}){if(v.IsUndefined(e))return this.Throw("Enum undefined or empty");let u=Object.getOwnPropertyNames(e).filter(l=>isNaN(l)).map(l=>e[l]),c=[...new Set(u)].map(l=>a.Type.Literal(l));return this.Union(c,{...t,[a.Hint]:"Enum"})}Extends(e,t,u,f,c={}){switch(se.Extends(e,t)){case T.Union:return this.Union([x.Type(u,c),x.Type(f,c)]);case T.True:return x.Type(u,c);case T.False:return x.Type(f,c)}}Exclude(e,t,u={}){return s.TTemplateLiteral(e)?this.Exclude(G.Resolve(e),t,u):s.TTemplateLiteral(t)?this.Exclude(e,G.Resolve(t),u):s.TUnion(e)?(()=>{let f=e.anyOf.filter(c=>se.Extends(c,t)===T.False);return f.length===1?x.Type(f[0],u):this.Union(f,u)})():se.Extends(e,t)!==T.False?this.Never(u):x.Type(e,u)}Extract(e,t,u={}){return s.TTemplateLiteral(e)?this.Extract(G.Resolve(e),t,u):s.TTemplateLiteral(t)?this.Extract(e,G.Resolve(t),u):s.TUnion(e)?(()=>{let f=e.anyOf.filter(c=>se.Extends(c,t)!==T.False);return f.length===1?x.Type(f[0],u):this.Union(f,u)})():se.Extends(e,t)!==T.False?x.Type(e,u):this.Never(u)}Index(e,t,u={}){return s.TArray(e)&&s.TNumber(t)?x.Type(e.items,u):s.TTuple(e)&&s.TNumber(t)?(()=>{let c=(v.IsUndefined(e.items)?[]:e.items).map(l=>x.Type(l));return this.Union(c,u)})():(()=>{let f=Re.Resolve(t),c=x.Type(e);return Nn.Resolve(c,f,u)})()}Integer(e={}){return this.Create({...e,[a.Kind]:"Integer",type:"integer"})}Intersect(e,t={}){if(e.length===0)return a.Type.Never();if(e.length===1)return x.Type(e[0],t);e.some(l=>s.TTransform(l))&&this.Throw("Cannot intersect transform types");let u=e.every(l=>s.TObject(l)),f=x.Rest(e),c=s.TSchema(t.unevaluatedProperties)?{unevaluatedProperties:x.Type(t.unevaluatedProperties)}:{};return t.unevaluatedProperties===!1||s.TSchema(t.unevaluatedProperties)||u?this.Create({...t,...c,[a.Kind]:"Intersect",type:"object",allOf:f}):this.Create({...t,...c,[a.Kind]:"Intersect",allOf:f})}KeyOf(e,t={}){return s.TRecord(e)?(()=>{let u=Object.getOwnPropertyNames(e.patternProperties)[0];return u===a.PatternNumberExact?this.Number(t):u===a.PatternStringExact?this.String(t):this.Throw("Unable to resolve key type from Record key pattern")})():s.TTuple(e)?(()=>{let f=(v.IsUndefined(e.items)?[]:e.items).map((c,l)=>a.Type.Literal(l.toString()));return this.Union(f,t)})():s.TArray(e)?this.Number(t):(()=>{let u=Xe.ResolveKeys(e,{includePatterns:!1});if(u.length===0)return this.Never(t);let f=u.map(c=>this.Literal(c));return this.Union(f,t)})()}Literal(e,t={}){return this.Create({...t,[a.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,t={}){return{...me.Map(x.Type(e),"Lowercase"),...t}}Never(e={}){return this.Create({...e,[a.Kind]:"Never",not:{}})}Not(e,t){return this.Create({...t,[a.Kind]:"Not",not:x.Type(e)})}Null(e={}){return this.Create({...e,[a.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[a.Kind]:"Number",type:"number"})}Object(e,t={}){let u=Object.getOwnPropertyNames(e),f=u.filter(d=>s.TOptional(e[d])),c=u.filter(d=>!f.includes(d)),l=s.TSchema(t.additionalProperties)?{additionalProperties:x.Type(t.additionalProperties)}:{},p=u.reduce((d,m)=>({...d,[m]:x.Type(e[m])}),{});return c.length>0?this.Create({...t,...l,[a.Kind]:"Object",type:"object",properties:p,required:c}):this.Create({...t,...l,[a.Kind]:"Object",type:"object",properties:p})}Omit(e,t,u={}){let f=Re.Resolve(t);return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),c=>{v.IsArray(c.required)&&(c.required=c.required.filter(l=>!f.includes(l)),c.required.length===0&&delete c.required);for(let l of Object.getOwnPropertyNames(c.properties))f.includes(l)&&delete c.properties[l];return this.Create(c)},u)}Partial(e,t={}){return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),u=>{let f=Object.getOwnPropertyNames(u.properties).reduce((c,l)=>({...c,[l]:this.Optional(u.properties[l])}),{});return this.Object(f,this.Discard(u,["required"]))},t)}Pick(e,t,u={}){let f=Re.Resolve(t);return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),c=>{v.IsArray(c.required)&&(c.required=c.required.filter(l=>f.includes(l)),c.required.length===0&&delete c.required);for(let l of Object.getOwnPropertyNames(c.properties))f.includes(l)||delete c.properties[l];return this.Create(c)},u)}Record(e,t,u={}){return s.TTemplateLiteral(e)?(()=>{let f=ve.ParseExact(e.pattern);return be.Check(f)?this.Object([...Ie.Generate(f)].reduce((c,l)=>({...c,[l]:x.Type(t)}),{}),u):this.Create({...u,[a.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:x.Type(t)}})})():s.TUnion(e)?(()=>{let f=Bn.Resolve(e);if(s.TUnionLiteral(f)){let c=f.anyOf.reduce((l,p)=>({...l,[p.const]:x.Type(t)}),{});return this.Object(c,{...u,[a.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():s.TLiteral(e)?v.IsString(e.const)||v.IsNumber(e.const)?this.Object({[e.const]:x.Type(t)},u):this.Throw("Record key of type literal is not of type string or number"):s.TInteger(e)||s.TNumber(e)?this.Create({...u,[a.Kind]:"Record",type:"object",patternProperties:{[a.PatternNumberExact]:x.Type(t)}}):s.TString(e)?(()=>{let f=v.IsUndefined(e.pattern)?a.PatternStringExact:e.pattern;return this.Create({...u,[a.Kind]:"Record",type:"object",patternProperties:{[f]:x.Type(t)}})})():this.Never()}Recursive(e,t={}){v.IsUndefined(t.$id)&&(t.$id=`T${Rt++}`);let u=e({[a.Kind]:"This",$ref:`${t.$id}`});return u.$id=t.$id,this.Create({...t,[a.Hint]:"Recursive",...u})}Ref(e,t={}){return v.IsString(e)?this.Create({...t,[a.Kind]:"Ref",$ref:e}):(v.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...t,[a.Kind]:"Ref",$ref:e.$id}))}Required(e,t={}){return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),u=>{let f=Object.getOwnPropertyNames(u.properties).reduce((c,l)=>({...c,[l]:this.Discard(u.properties[l],[a.Optional])}),{});return this.Object(f,u)},t)}Rest(e){return s.TTuple(e)&&!v.IsUndefined(e.items)?x.Rest(e.items):s.TIntersect(e)?x.Rest(e.allOf):s.TUnion(e)?x.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[a.Kind]:"String",type:"string"})}TemplateLiteral(e,t={}){let u=v.IsString(e)?Ge.Create(jn.Parse(e)):Ge.Create(e);return this.Create({...t,[a.Kind]:"TemplateLiteral",type:"string",pattern:u})}Transform(e){return new nn(e)}Tuple(e,t={}){let[u,f,c]=[!1,e.length,e.length],l=x.Rest(e),p=e.length>0?{...t,[a.Kind]:"Tuple",type:"array",items:l,additionalItems:u,minItems:f,maxItems:c}:{...t,[a.Kind]:"Tuple",type:"array",minItems:f,maxItems:c};return this.Create(p)}Uncapitalize(e,t={}){return{...me.Map(x.Type(e),"Uncapitalize"),...t}}Union(e,t={}){return s.TTemplateLiteral(e)?G.Resolve(e):(()=>{let u=e;if(u.length===0)return this.Never(t);if(u.length===1)return this.Create(x.Type(u[0],t));let f=x.Rest(u);return this.Create({...t,[a.Kind]:"Union",anyOf:f})})()}Unknown(e={}){return this.Create({...e,[a.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[a.Kind]:e[a.Kind]||"Unsafe"})}Uppercase(e,t={}){return{...me.Map(x.Type(e),"Uppercase"),...t}}};a.JsonTypeBuilder=Ne;var un=class extends Ne{AsyncIterator(e,t={}){return this.Create({...t,[a.Kind]:"AsyncIterator",type:"AsyncIterator",items:x.Type(e)})}Awaited(e,t={}){let u=f=>f.length>0?(()=>{let[c,...l]=f;return[this.Awaited(c),...u(l)]})():f;return s.TIntersect(e)?a.Type.Intersect(u(e.allOf)):s.TUnion(e)?a.Type.Union(u(e.anyOf)):s.TPromise(e)?this.Awaited(e.item):x.Type(e,t)}BigInt(e={}){return this.Create({...e,[a.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,t={}){return this.Tuple([...e.parameters],{...t})}Constructor(e,t,u){let[f,c]=[x.Rest(e),x.Type(t)];return this.Create({...u,[a.Kind]:"Constructor",type:"Constructor",parameters:f,returns:c})}Date(e={}){return this.Create({...e,[a.Kind]:"Date",type:"Date"})}Function(e,t,u){let[f,c]=[x.Rest(e),x.Type(t)];return this.Create({...u,[a.Kind]:"Function",type:"Function",parameters:f,returns:c})}InstanceType(e,t={}){return x.Type(e.returns,t)}Iterator(e,t={}){return this.Create({...t,[a.Kind]:"Iterator",type:"Iterator",items:x.Type(e)})}Parameters(e,t={}){return this.Tuple(e.parameters,{...t})}Promise(e,t={}){return this.Create({...t,[a.Kind]:"Promise",type:"Promise",item:x.Type(e)})}RegExp(e,t={}){let u=v.IsString(e)?e:e.source;return this.Create({...t,[a.Kind]:"String",type:"string",pattern:u})}RegEx(e,t={}){return this.RegExp(e,t)}ReturnType(e,t={}){return x.Type(e.returns,t)}Symbol(e){return this.Create({...e,[a.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[a.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[a.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[a.Kind]:"Void",type:"void"})}};a.JavaScriptTypeBuilder=un;a.JsonType=new Ne;a.Type=new un});var ft=Dn((si,lt)=>{"use strict";function g(n){if(!(this instanceof g))return new g(n);this._=n}var U=g.prototype;function Yn(n,e){var t=0;for(t;t<n;t++)e(t)}function $t(n,e){Yn(e.length,function(t){n(e[t],t,e)})}function fe(n,e,t){return $t(function(u,f,c){e=n(e,u,f,c)},t),e}function te(n,e){return fe(function(t,u,f,c){return t.concat([n(u,f,c)])},[],e)}function Kt(n){var e=fe(function(t,u,f,c){return t.concat(f===c.length-1?Buffer.from([u,0]).readUInt16BE(0):c.readUInt16BE(f))},[],n);return Buffer.from(te(function(t){return(t<<1&65535)>>8},e))}function kt(n,e){var t={v:0,buf:e};return Yn(n,function(){t={v:t.v<<1|Dt(t.buf),buf:Kt(t.buf)}}),t}function Dt(n){return n[0]>>7}function Mt(n){return fe(function(e,t){return e+t},0,n)}function zt(n,e){return fe(function(t,u){return t||(n(u)?u:t)},null,e)}function Gn(){return typeof Buffer<"u"}function qt(){if(g._supportsSet!==void 0)return g._supportsSet;var n=typeof Set<"u";return g._supportsSet=n,n}function mn(){if(!Gn())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function hn(n){mn();var e=Mt(n);if(e%8!==0)throw new Error("The bits ["+n.join(", ")+"] add up to "+e+" which is not an even number of bytes; the total should be divisible by 8");var t=e/8,u=zt(function(f){return f>48},n);if(u)throw new Error(u+" bit range requested exceeds 48 bit (6 byte) Number max.");return new g(function(f,c){var l=t+c;return l>f.length?V(c,t.toString()+" bytes"):F(l,fe(function(p,d){var m=kt(d,p.buf);return{coll:p.coll.concat(m.v),buf:m.buf}},{coll:[],buf:f.slice(c,l)},n).coll)})}function _t(n){mn();var e={},t=0,u=te(function(l){if(Oe(l)){var p=l;if(p.length!==2)throw new Error("["+p.join(", ")+"] should be length 2, got length "+p.length);if(Fe(p[0]),Ue(p[1]),Object.prototype.hasOwnProperty.call(e,p[0]))throw new Error("duplicate key in bitSeqObj: "+p[0]);return e[p[0]]=!0,t++,p}else return Ue(l),[null,l]},n);if(t<1)throw new Error("bitSeqObj expects at least one named pair, got ["+n.join(", ")+"]");var f=te(function(l){return l[0]},u),c=te(function(l){return l[1]},u);return hn(c).map(function(l){var p=te(function(d,m){return[d,l[m]]},f);return fe(function(d,m){return m[0]!==null&&(d[m[0]]=m[1]),d},{},p)})}function Q(n,e){return new g(function(t,u){return mn(),u+e>t.length?V(u,e+" bytes for "+n):F(u+e,t.slice(u,u+e))})}function Vt(n){return Q("buffer",n).map(function(e){return Buffer.from(e)})}function Ht(n,e){return Q("string",e).map(function(t){return t.toString(n)})}function Jt(n){return typeof n=="number"&&Math.floor(n)===n}function gn(n,e){if(!Jt(e)||e<0||e>6)throw new Error(n+" requires integer length in range [0, 6].")}function sn(n){return gn("uintBE",n),Q("uintBE("+n+")",n).map(function(e){return e.readUIntBE(0,n)})}function cn(n){return gn("uintLE",n),Q("uintLE("+n+")",n).map(function(e){return e.readUIntLE(0,n)})}function ln(n){return gn("intBE",n),Q("intBE("+n+")",n).map(function(e){return e.readIntBE(0,n)})}function fn(n){return gn("intLE",n),Q("intLE("+n+")",n).map(function(e){return e.readIntLE(0,n)})}function Zt(){return Q("floatBE",4).map(function(n){return n.readFloatBE(0)})}function Wt(){return Q("floatLE",4).map(function(n){return n.readFloatLE(0)})}function Xt(){return Q("doubleBE",8).map(function(n){return n.readDoubleBE(0)})}function Qt(){return Q("doubleLE",8).map(function(n){return n.readDoubleLE(0)})}function Yt(n){return Array.prototype.slice.call(n)}function $e(n){return n instanceof g}function Oe(n){return{}.toString.call(n)==="[object Array]"}function Ce(n){return Gn()&&Buffer.isBuffer(n)}function F(n,e){return{status:!0,index:n,value:e,furthest:-1,expected:[]}}function V(n,e){return Oe(e)||(e=[e]),{status:!1,index:-1,value:null,furthest:n,expected:e}}function J(n,e){if(!e||n.furthest>e.furthest)return n;var t=n.furthest===e.furthest?Gt(n.expected,e.expected):e.expected;return{status:n.status,index:n.index,value:n.value,furthest:e.furthest,expected:t}}var Tn={};function et(n,e){if(Ce(n))return{offset:e,line:-1,column:-1};n in Tn||(Tn[n]={});for(var t=Tn[n],u=0,f=0,c=0,l=e;l>=0;){if(l in t){u=t[l].line,c===0&&(c=t[l].lineStart);break}(n.charAt(l)===`
`||n.charAt(l)==="\r"&&n.charAt(l+1)!==`
`)&&(f++,c===0&&(c=l+1)),l--}var p=u+f,d=e-c;return t[e]={line:p,lineStart:c},{offset:e,line:p+1,column:d+1}}function Gt(n,e){if(qt()&&Array.from){for(var t=new Set(n),u=0;u<e.length;u++)t.add(e[u]);var f=Array.from(t);return f.sort(),f}for(var c={},l=0;l<n.length;l++)c[n[l]]=!0;for(var p=0;p<e.length;p++)c[e[p]]=!0;var d=[];for(var m in c)({}).hasOwnProperty.call(c,m)&&d.push(m);return d.sort(),d}function xe(n){if(!$e(n))throw new Error("not a parser: "+n)}function vn(n,e){return typeof n=="string"?n.charAt(e):n[e]}function ht(n){if(!Oe(n))throw new Error("not an array: "+n)}function Ue(n){if(typeof n!="number")throw new Error("not a number: "+n)}function er(n){if(!(n instanceof RegExp))throw new Error("not a regexp: "+n);for(var e=tt(n),t=0;t<e.length;t++){var u=e.charAt(t);if(u!=="i"&&u!=="m"&&u!=="u"&&u!=="s")throw new Error('unsupported regexp flag "'+u+'": '+n)}}function le(n){if(typeof n!="function")throw new Error("not a function: "+n)}function Fe(n){if(typeof n!="string")throw new Error("not a string: "+n)}var nr=2,tr=3,re=8,rr=re*5,ir=re*4,Xn="  ";function dn(n,e){return new Array(e+1).join(n)}function or(n){return n.length===1?`Expected:

`+n[0]:`Expected one of the following: 

`+n.join(", ")}function pn(n,e,t){var u=e-n.length;return u<=0?n:dn(t,u)+n}function ur(n,e){var t=n.length,u=[],f=0;if(t<=e)return[n.slice()];for(var c=0;c<t;c++)u[f]||u.push([]),u[f].push(n[c]),(c+1)%e===0&&f++;return u}function Qn(n,e,t,u){return{from:n-e>0?n-e:0,to:n+t>u?u:n+t}}function ar(n){return n.from===0&&n.to===1?{from:n.from,to:n.to}:{from:n.from/re,to:Math.floor(n.to/re)}}function sr(n,e){var t=e.index,u=t.offset,f=1,c,l,p,d,m;if(u===n.length)return"Got the end of the input";if(Ce(n)){var I=u-u%re,b=u-I,P=Qn(I,rr,ir+re,n.length),y=n.slice(P.from,P.to),O=ur(y.toJSON().data,re),S=te(function(N){return te(function(k){return pn(k.toString(16),2,"0")},N)},O);d=ar(P),l=I/re,c=b*3,b>=4&&(c+=1),f=2,p=te(function(N){return N.length<=4?N.join(" "):N.slice(0,4).join(" ")+"  "+N.slice(4).join(" ")},S),m=((d.to>0?d.to-1:d.to)*8).toString(16).length,m<2&&(m=2)}else{var E=n.split(/\r\n|[\n\r\u2028\u2029]/);c=t.column-1,l=t.line-1,d=Qn(l,nr,tr,E.length),p=E.slice(d.from,d.to),m=d.to.toString().length}var R=l-d.from;Ce(n)&&(m=((d.to>0?d.to-1:d.to)*8).toString(16).length,m<2&&(m=2));var L=fe(function(N,k,ee){var w=ee===R,ie=w?"> ":Xn,Y;return Ce(n)?Y=pn(((d.from+ee)*8).toString(16),m,"0"):Y=pn((d.from+ee+1).toString(),m," "),[].concat(N,[ie+Y+" | "+k],w?[Xn+dn(" ",m)+" | "+pn("",c," ")+dn("^",f)]:[])},[],p);return L.join(`
`)}function nt(n,e){return[`
`,"-- PARSING FAILED "+dn("-",50),`

`,sr(n,e),`

`,or(e.expected),`
`].join("")}function tt(n){return n.flags!==void 0?n.flags:[n.global?"g":"",n.ignoreCase?"i":"",n.multiline?"m":"",n.unicode?"u":"",n.sticky?"y":""].join("")}function cr(n){return RegExp("^(?:"+n.source+")",tt(n))}function bn(){for(var n=[].slice.call(arguments),e=n.length,t=0;t<e;t+=1)xe(n[t]);return g(function(u,f){for(var c,l=new Array(e),p=0;p<e;p+=1){if(c=J(n[p]._(u,f),c),!c.status)return c;l[p]=c.value,f=c.index}return J(F(f,l),c)})}function lr(){for(var n={},e=0,t=Yt(arguments),u=t.length,f=0;f<u;f+=1){var c=t[f];if(!$e(c)){if(Oe(c)){var l=c.length===2&&typeof c[0]=="string"&&$e(c[1]);if(l){var p=c[0];if(Object.prototype.hasOwnProperty.call(n,p))throw new Error("seqObj: duplicate key "+p);n[p]=!0,e++;continue}}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(e===0)throw new Error("seqObj expects at least one named parser, found zero");return g(function(d,m){for(var I,b={},P=0;P<u;P+=1){var y,O;if(Oe(t[P])?(y=t[P][0],O=t[P][1]):(y=null,O=t[P]),I=J(O._(d,m),I),!I.status)return I;y&&(b[y]=I.value),m=I.index}return J(F(m,b),I)})}function pe(){var n=[].slice.call(arguments);if(n.length===0)throw new Error("seqMap needs at least one argument");var e=n.pop();return le(e),bn.apply(null,n).map(function(t){return e.apply(null,t)})}function fr(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&function(u){var f=function(){return n[u](e)};e[u]=ot(f)}(t);return e}function In(){var n=[].slice.call(arguments),e=n.length;if(e===0)return On("zero alternates");for(var t=0;t<e;t+=1)xe(n[t]);return g(function(u,f){for(var c,l=0;l<n.length;l+=1)if(c=J(n[l]._(u,f),c),c.status)return c;return c})}function rt(n,e){return Cn(n,e).or(Te([]))}function Cn(n,e){xe(n),xe(e);var t=e.then(n).many();return pe(n,t,function(u,f){return[u].concat(f)})}U.parse=function(n){if(typeof n!="string"&&!Ce(n))throw new Error(".parse must be called with a string or Buffer as its argument");var e=this.skip($n)._(n,0),t;return e.status?t={status:!0,value:e.value}:t={status:!1,index:et(n,e.furthest),expected:e.expected},delete Tn[n],t};U.tryParse=function(n){var e=this.parse(n);if(e.status)return e.value;var t=nt(n,e),u=new Error(t);throw u.type="ParsimmonError",u.result=e,u};U.assert=function(n,e){return this.chain(function(t){return n(t)?Te(t):On(e)})};U.or=function(n){return In(this,n)};U.trim=function(n){return this.wrap(n,n)};U.wrap=function(n,e){return pe(n,this,e,function(t,u){return u})};U.thru=function(n){return n(this)};U.then=function(n){return xe(n),bn(this,n).map(function(e){return e[1]})};U.many=function(){var n=this;return g(function(e,t){for(var u=[],f=void 0;;)if(f=J(n._(e,t),f),f.status){if(t===f.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");t=f.index,u.push(f.value)}else return J(F(t,u),f)})};U.tieWith=function(n){return Fe(n),this.map(function(e){if(ht(e),e.length){Fe(e[0]);for(var t=e[0],u=1;u<e.length;u++)Fe(e[u]),t+=n+e[u];return t}else return""})};U.tie=function(){return this.tieWith("")};U.times=function(n,e){var t=this;return arguments.length<2&&(e=n),Ue(n),Ue(e),g(function(u,f){for(var c=[],l=void 0,p=void 0,d=0;d<n;d+=1)if(l=t._(u,f),p=J(l,p),l.status)f=l.index,c.push(l.value);else return p;for(;d<e&&(l=t._(u,f),p=J(l,p),l.status);d+=1)f=l.index,c.push(l.value);return J(F(f,c),p)})};U.result=function(n){return this.map(function(){return n})};U.atMost=function(n){return this.times(0,n)};U.atLeast=function(n){return pe(this.times(n),this.many(),function(e,t){return e.concat(t)})};U.map=function(n){le(n);var e=this;return g(function(t,u){var f=e._(t,u);return f.status?J(F(f.index,n(f.value)),f):f})};U.contramap=function(n){le(n);var e=this;return g(function(t,u){var f=e.parse(n(t.slice(u)));return f.status?F(u+t.length,f.value):f})};U.promap=function(n,e){return le(n),le(e),this.contramap(n).map(e)};U.skip=function(n){return bn(this,n).map(function(e){return e[0]})};U.mark=function(){return pe(Ke,this,Ke,function(n,e,t){return{start:n,value:e,end:t}})};U.node=function(n){return pe(Ke,this,Ke,function(e,t,u){return{name:n,value:t,start:e,end:u}})};U.sepBy=function(n){return rt(this,n)};U.sepBy1=function(n){return Cn(this,n)};U.lookahead=function(n){return this.skip(yn(n))};U.notFollowedBy=function(n){return this.skip(it(n))};U.desc=function(n){Oe(n)||(n=[n]);var e=this;return g(function(t,u){var f=e._(t,u);return f.status||(f.expected=n),f})};U.fallback=function(n){return this.or(Te(n))};U.ap=function(n){return pe(n,this,function(e,t){return e(t)})};U.chain=function(n){var e=this;return g(function(t,u){var f=e._(t,u);if(!f.status)return f;var c=n(f.value);return J(c._(t,f.index),f)})};function ke(n){Fe(n);var e="'"+n+"'";return g(function(t,u){var f=u+n.length,c=t.slice(u,f);return c===n?F(f,c):V(u,e)})}function pr(n){if(mn(),Ue(n),n>255)throw new Error("Value specified to byte constructor ("+n+"=0x"+n.toString(16)+") is larger in value than a single byte.");var e=(n>15?"0x":"0x0")+n.toString(16);return g(function(t,u){var f=vn(t,u);return f===n?F(u+1,f):V(u,e)})}function h(n,e){er(n),arguments.length>=2?Ue(e):e=0;var t=cr(n),u=""+n;return g(function(f,c){var l=t.exec(f.slice(c));if(l){if(0<=e&&e<=l.length){var p=l[0],d=l[e];return F(c+p.length,d)}var m="valid match group (0 to "+l.length+") in "+u;return V(c,m)}return V(c,u)})}function Te(n){return g(function(e,t){return F(t,n)})}function On(n){return g(function(e,t){return V(t,n)})}function yn(n){if($e(n))return g(function(e,t){var u=n._(e,t);return u.index=t,u.value="",u});if(typeof n=="string")return yn(ke(n));if(n instanceof RegExp)return yn(h(n));throw new Error("not a string, regexp, or parser: "+n)}function it(n){return xe(n),g(function(e,t){var u=n._(e,t),f=e.slice(t,u.index);return u.status?V(t,'not "'+f+'"'):F(t,null)})}function xn(n){return le(n),g(function(e,t){var u=vn(e,t);return t<e.length&&n(u)?F(t+1,u):V(t,"a character/byte matching "+n)})}function Tr(n){for(var e=n.split(""),t=0;t<e.length;t++)e[t]="'"+e[t]+"'";return xn(function(u){return n.indexOf(u)>=0}).desc(e)}function dr(n){return xn(function(e){return n.indexOf(e)<0}).desc("none of '"+n+"'")}function yr(n){return g(n(F,V))}function mr(n,e){return xn(function(t){return n<=t&&t<=e}).desc(n+"-"+e)}function gr(n){return le(n),g(function(e,t){for(var u=t;u<e.length&&n(vn(e,u));)u++;return F(u,e.slice(t,u))})}function ot(n,e){arguments.length<2&&(e=n,n=void 0);var t=g(function(u,f){return t._=e()._,t._(u,f)});return n?t.desc(n):t}function Fn(){return On("fantasy-land/empty")}U.concat=U.or;U.empty=Fn;U.of=Te;U["fantasy-land/ap"]=U.ap;U["fantasy-land/chain"]=U.chain;U["fantasy-land/concat"]=U.concat;U["fantasy-land/empty"]=U.empty;U["fantasy-land/of"]=U.of;U["fantasy-land/map"]=U.map;var Ke=g(function(n,e){return F(e,et(n,e))}),vr=g(function(n,e){return e>=n.length?V(e,"any character/byte"):F(e+1,vn(n,e))}),br=g(function(n,e){return F(n.length,n.slice(e))}),$n=g(function(n,e){return e<n.length?V(e,"EOF"):F(e,null)}),Ir=h(/[0-9]/).desc("a digit"),Or=h(/[0-9]*/).desc("optional digits"),xr=h(/[a-z]/i).desc("a letter"),Ur=h(/[a-z]*/i).desc("optional letters"),Pr=h(/\s*/).desc("optional whitespace"),Sr=h(/\s+/).desc("whitespace"),ut=ke("\r"),at=ke(`
`),st=ke(`\r
`),ct=In(st,at,ut).desc("newline"),wr=In(ct,$n);g.all=br;g.alt=In;g.any=vr;g.cr=ut;g.createLanguage=fr;g.crlf=st;g.custom=yr;g.digit=Ir;g.digits=Or;g.empty=Fn;g.end=wr;g.eof=$n;g.fail=On;g.formatError=nt;g.index=Ke;g.isParser=$e;g.lazy=ot;g.letter=xr;g.letters=Ur;g.lf=at;g.lookahead=yn;g.makeFailure=V;g.makeSuccess=F;g.newline=ct;g.noneOf=dr;g.notFollowedBy=it;g.of=Te;g.oneOf=Tr;g.optWhitespace=Pr;g.Parser=g;g.range=mr;g.regex=h;g.regexp=h;g.sepBy=rt;g.sepBy1=Cn;g.seq=bn;g.seqMap=pe;g.seqObj=lr;g.string=ke;g.succeed=Te;g.takeWhile=gr;g.test=xn;g.whitespace=Sr;g["fantasy-land/empty"]=Fn;g["fantasy-land/of"]=Te;g.Binary={bitSeq:hn,bitSeqObj:_t,byte:pr,buffer:Vt,encodedString:Ht,uintBE:sn,uint8BE:sn(1),uint16BE:sn(2),uint32BE:sn(4),uintLE:cn,uint8LE:cn(1),uint16LE:cn(2),uint32LE:cn(4),intBE:ln,int8BE:ln(1),int16BE:ln(2),int32BE:ln(4),intLE:fn,int8LE:fn(1),int16LE:fn(2),int32LE:fn(4),floatBE:Zt(),floatLE:Wt(),doubleBE:Xt(),doubleLE:Qt()};lt.exports=g});var B=ae(ce(),1),At=B.Type.Object({messageId:B.Type.String(),position:B.Type.Object({start:B.Type.Object({line:B.Type.Number(),character:B.Type.Number()}),end:B.Type.Object({line:B.Type.Number(),character:B.Type.Number()})})}),Nr=B.Type.Object({messageReferenceMatchers:B.Type.Array(B.Type.Function([B.Type.Object({documentText:B.Type.String()})],B.Type.Promise(B.Type.Array(At)))),extractMessageOptions:B.Type.Array(B.Type.Object({callback:B.Type.Function([B.Type.Object({messageId:B.Type.String(),selection:B.Type.String()})],B.Type.Object({messageId:B.Type.String(),messageReplacement:B.Type.String()}))})),documentSelectors:B.Type.Optional(B.Type.Array(B.Type.Object({language:B.Type.Optional(B.Type.String())})))});var _=ae(ce(),1);var qn=ae(ce(),1),_n="^((?<grandfathered>(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((?<language>([A-Za-z]{2,3}(-(?<extlang>[A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?))(-(?<script>[A-Za-z]{4}))?(-(?<region>[A-Za-z]{2}|[0-9]{3}))?(-(?<variant>[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*))$",Be=qn.Type.String({pattern:_n,examples:["en","de","en-US","zh-Hans","es-419"]});var je=ae(ce(),1),an=n=>je.Type.Union([n,je.Type.Intersect([je.Type.Object({en:n}),je.Type.Record(Be,n)])]);var Nt=_.Type.Object({id:_.Type.String({pattern:"^plugin\\.([a-z][a-zA-Z0-9]*)\\.([a-z][a-zA-Z0-9]*(?:[A-Z][a-z0-9]*)*)$",examples:["plugin.namespace.id"]}),displayName:an(_.Type.String()),description:an(_.Type.String()),settingsSchema:_.Type.Optional(_.Type.Object({},{additionalProperties:!0})),loadMessages:_.Type.Optional(_.Type.Any()),saveMessages:_.Type.Optional(_.Type.Any()),detectedLanguageTags:_.Type.Optional(_.Type.Any()),addCustomApi:_.Type.Optional(_.Type.Any())});var $=ae(ce(),1),Bt=$.Type.Object({type:$.Type.Literal("Text"),value:$.Type.String()}),jt=$.Type.Object({type:$.Type.Literal("VariableReference"),name:$.Type.String()}),Vn=$.Type.Union([jt]),Ct=$.Type.Array($.Type.Union([Bt,Vn])),Ft=$.Type.Object({languageTag:Be,match:$.Type.Array($.Type.String()),pattern:Ct}),Qr=$.Type.Object({id:$.Type.String(),alias:$.Type.Record($.Type.String(),$.Type.String()),selectors:$.Type.Array(Vn),variants:$.Type.Array(Ft)});var Jn={en:"t-function JSX hybrid matcher"},Zn={en:"t-function JSX hybrid matcher"};var X=ae(ce(),1),Wn=X.Type.Object({preferredTfuncName:X.Type.Optional(X.Type.String({title:"Preferred t-function name",description:'The t("key") function name to use when extracting a new string.',default:"t",examples:["t","translate","i18n.t"]})),recognizedTfuncNames:X.Type.Optional(X.Type.Array(X.Type.String(),{title:"Recognized t-function names",description:'Array of recognized t("key") function names (to show inline previews of messages)',default:["t"],examples:["t","translate","i18n.t"]})),recognizedJSXAttributes:X.Type.Optional(X.Type.Array(X.Type.String(),{title:"Recognized JSX attributes",description:"which JSX attributes should be recognized as translate ones",default:[],examples:["tx","subTx"]}))});var K=ae(ft(),1);function Er(n){return K.default.createLanguage({entry:t=>K.default.alt(t.FunctionCall,K.default.any).many().map(u=>u.filter(f=>typeof f=="object")),stringLiteral:t=>K.default.alt(t.doubleQuotedString,t.singleQuotedString),doubleQuotedString:()=>K.default.string('"').then(K.default.regex(/[^"]*/)).skip(K.default.string('"')),singleQuotedString:()=>K.default.string("'").then(K.default.regex(/[^']*/)).skip(K.default.string("'")),FunctionCall:function(t){return K.default.seqMap(K.default.regex(/[^a-zA-Z0-9]/),K.default.alt(...n.map(K.default.string)),K.default.string("("),K.default.index,t.stringLiteral,K.default.index,K.default.regex(/[^)]*/),K.default.string(")"),(u,f,c,l,p,d)=>({messageId:p,position:{start:{line:l.line,character:l.column},end:{line:d.line,character:d.column}}}))}})}function pt(n,e){try{return Er(e?.recognizedTfuncNames??["t"]).entry.tryParse(n)}catch{return[]}}var Tt=n=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>pt(e.documentText,n)],extractMessageOptions:[{callback:e=>({messageId:e.messageId,messageReplacement:`"${e.messageId}"`})},{callback:e=>({messageId:e.messageId,messageReplacement:`${n?.preferredTfuncName??"t"}("${e.messageId}")`})},{callback:e=>({messageId:e.messageId,messageReplacement:`{${n?.preferredTfuncName??"t"}("${e.messageId}")}`})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"},{language:"astro"},{language:"vue"}]}});var Lr="plugin.minibits.inlangmatcher",dt={id:Lr,displayName:Jn,description:Zn,settingsSchema:Wn,addCustomApi:({settings:n})=>Tt(n["plugin.minibits.inlangmatcher"])};var Oi=dt;export{Oi as default};
