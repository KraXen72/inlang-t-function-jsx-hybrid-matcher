var Pt=Object.create;var kn=Object.defineProperty;var St=Object.getOwnPropertyDescriptor;var Ut=Object.getOwnPropertyNames;var wt=Object.getPrototypeOf,Et=Object.prototype.hasOwnProperty;var Mn=(n,e)=>()=>(e||n((e={exports:{}}).exports,e),e.exports);var Lt=(n,e,t,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let f of Ut(e))!Et.call(n,f)&&f!==t&&kn(n,f,{get:()=>e[f],enumerable:!(o=St(e,f))||o.enumerable});return n};var ae=(n,e,t)=>(t=n!=null?Pt(wt(n)):{},Lt(e||!n||!n.__esModule?kn(t,"default",{value:n,enumerable:!0}):t,n));var ce=Mn(a=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});a.Type=a.JsonType=a.JavaScriptTypeBuilder=a.JsonTypeBuilder=a.TypeBuilder=a.TypeBuilderError=a.TransformEncodeBuilder=a.TransformDecodeBuilder=a.TemplateLiteralDslParser=a.TemplateLiteralGenerator=a.TemplateLiteralGeneratorError=a.TemplateLiteralFinite=a.TemplateLiteralFiniteError=a.TemplateLiteralParser=a.TemplateLiteralParserError=a.TemplateLiteralResolver=a.TemplateLiteralPattern=a.TemplateLiteralPatternError=a.UnionResolver=a.KeyArrayResolver=a.KeyArrayResolverError=a.KeyResolver=a.ObjectMap=a.Intrinsic=a.IndexedAccessor=a.TypeClone=a.TypeExtends=a.TypeExtendsResult=a.TypeExtendsError=a.ExtendsUndefined=a.TypeGuard=a.TypeGuardUnknownTypeError=a.ValueGuard=a.FormatRegistry=a.TypeBoxError=a.TypeRegistry=a.PatternStringExact=a.PatternNumberExact=a.PatternBooleanExact=a.PatternString=a.PatternNumber=a.PatternBoolean=a.Kind=a.Hint=a.Optional=a.Readonly=a.Transform=void 0;a.Transform=Symbol.for("TypeBox.Transform");a.Readonly=Symbol.for("TypeBox.Readonly");a.Optional=Symbol.for("TypeBox.Optional");a.Hint=Symbol.for("TypeBox.Hint");a.Kind=Symbol.for("TypeBox.Kind");a.PatternBoolean="(true|false)";a.PatternNumber="(0|[1-9][0-9]*)";a.PatternString="(.*)";a.PatternBooleanExact=`^${a.PatternBoolean}$`;a.PatternNumberExact=`^${a.PatternNumber}$`;a.PatternStringExact=`^${a.PatternString}$`;var Rn;(function(n){let e=new Map;function t(){return new Map(e)}n.Entries=t;function o(){return e.clear()}n.Clear=o;function f(d){return e.delete(d)}n.Delete=f;function c(d){return e.has(d)}n.Has=c;function l(d,m){e.set(d,m)}n.Set=l;function p(d){return e.get(d)}n.Get=p})(Rn||(a.TypeRegistry=Rn={}));var W=class extends Error{constructor(e){super(e)}};a.TypeBoxError=W;var Dn;(function(n){let e=new Map;function t(){return new Map(e)}n.Entries=t;function o(){return e.clear()}n.Clear=o;function f(d){return e.delete(d)}n.Delete=f;function c(d){return e.has(d)}n.Has=c;function l(d,m){e.set(d,m)}n.Set=l;function p(d){return e.get(d)}n.Get=p})(Dn||(a.FormatRegistry=Dn={}));var I;(function(n){function e(v){return Array.isArray(v)}n.IsArray=e;function t(v){return typeof v=="bigint"}n.IsBigInt=t;function o(v){return typeof v=="boolean"}n.IsBoolean=o;function f(v){return v instanceof globalThis.Date}n.IsDate=f;function c(v){return v===null}n.IsNull=c;function l(v){return typeof v=="number"}n.IsNumber=l;function p(v){return typeof v=="object"&&v!==null}n.IsObject=p;function d(v){return typeof v=="string"}n.IsString=d;function m(v){return v instanceof globalThis.Uint8Array}n.IsUint8Array=m;function b(v){return v===void 0}n.IsUndefined=b})(I||(a.ValueGuard=I={}));var An=class extends W{};a.TypeGuardUnknownTypeError=An;var s;(function(n){function e(u){try{return new RegExp(u),!0}catch{return!1}}function t(u){if(!I.IsString(u))return!1;for(let F=0;F<u.length;F++){let H=u.charCodeAt(F);if(H>=7&&H<=13||H===27||H===127)return!1}return!0}function o(u){return l(u)||D(u)}function f(u){return I.IsUndefined(u)||I.IsBigInt(u)}function c(u){return I.IsUndefined(u)||I.IsNumber(u)}function l(u){return I.IsUndefined(u)||I.IsBoolean(u)}function p(u){return I.IsUndefined(u)||I.IsString(u)}function d(u){return I.IsUndefined(u)||I.IsString(u)&&t(u)&&e(u)}function m(u){return I.IsUndefined(u)||I.IsString(u)&&t(u)}function b(u){return I.IsUndefined(u)||D(u)}function v(u){return w(u,"Any")&&p(u.$id)}n.TAny=v;function P(u){return w(u,"Array")&&u.type==="array"&&p(u.$id)&&D(u.items)&&c(u.minItems)&&c(u.maxItems)&&l(u.uniqueItems)&&b(u.contains)&&c(u.minContains)&&c(u.maxContains)}n.TArray=P;function y(u){return w(u,"AsyncIterator")&&u.type==="AsyncIterator"&&p(u.$id)&&D(u.items)}n.TAsyncIterator=y;function O(u){return w(u,"BigInt")&&u.type==="bigint"&&p(u.$id)&&f(u.exclusiveMaximum)&&f(u.exclusiveMinimum)&&f(u.maximum)&&f(u.minimum)&&f(u.multipleOf)}n.TBigInt=O;function U(u){return w(u,"Boolean")&&u.type==="boolean"&&p(u.$id)}n.TBoolean=U;function L(u){return w(u,"Constructor")&&u.type==="Constructor"&&p(u.$id)&&I.IsArray(u.parameters)&&u.parameters.every(F=>D(F))&&D(u.returns)}n.TConstructor=L;function A(u){return w(u,"Date")&&u.type==="Date"&&p(u.$id)&&c(u.exclusiveMaximumTimestamp)&&c(u.exclusiveMinimumTimestamp)&&c(u.maximumTimestamp)&&c(u.minimumTimestamp)&&c(u.multipleOfTimestamp)}n.TDate=A;function R(u){return w(u,"Function")&&u.type==="Function"&&p(u.$id)&&I.IsArray(u.parameters)&&u.parameters.every(F=>D(F))&&D(u.returns)}n.TFunction=R;function B(u){return w(u,"Integer")&&u.type==="integer"&&p(u.$id)&&c(u.exclusiveMaximum)&&c(u.exclusiveMinimum)&&c(u.maximum)&&c(u.minimum)&&c(u.multipleOf)}n.TInteger=B;function k(u){return w(u,"Intersect")&&!(I.IsString(u.type)&&u.type!=="object")&&I.IsArray(u.allOf)&&u.allOf.every(F=>D(F)&&!Ee(F))&&p(u.type)&&(l(u.unevaluatedProperties)||b(u.unevaluatedProperties))&&p(u.$id)}n.TIntersect=k;function ee(u){return w(u,"Iterator")&&u.type==="Iterator"&&p(u.$id)&&D(u.items)}n.TIterator=ee;function w(u,F){return ie(u)&&u[a.Kind]===F}n.TKindOf=w;function ie(u){return I.IsObject(u)&&a.Kind in u&&I.IsString(u[a.Kind])}n.TKind=ie;function Y(u){return ne(u)&&I.IsString(u.const)}n.TLiteralString=Y;function Me(u){return ne(u)&&I.IsNumber(u.const)}n.TLiteralNumber=Me;function Pn(u){return ne(u)&&I.IsBoolean(u.const)}n.TLiteralBoolean=Pn;function ne(u){return w(u,"Literal")&&p(u.$id)&&(I.IsBoolean(u.const)||I.IsNumber(u.const)||I.IsString(u.const))}n.TLiteral=ne;function De(u){return w(u,"Never")&&I.IsObject(u.not)&&Object.getOwnPropertyNames(u.not).length===0}n.TNever=De;function z(u){return w(u,"Not")&&D(u.not)}n.TNot=z;function Se(u){return w(u,"Null")&&u.type==="null"&&p(u.$id)}n.TNull=Se;function Ue(u){return w(u,"Number")&&u.type==="number"&&p(u.$id)&&c(u.exclusiveMaximum)&&c(u.exclusiveMinimum)&&c(u.maximum)&&c(u.minimum)&&c(u.multipleOf)}n.TNumber=Ue;function de(u){return w(u,"Object")&&u.type==="object"&&p(u.$id)&&I.IsObject(u.properties)&&o(u.additionalProperties)&&c(u.minProperties)&&c(u.maxProperties)&&Object.entries(u.properties).every(([F,H])=>t(F)&&D(H))}n.TObject=de;function we(u){return w(u,"Promise")&&u.type==="Promise"&&p(u.$id)&&D(u.item)}n.TPromise=we;function ze(u){return w(u,"Record")&&u.type==="object"&&p(u.$id)&&o(u.additionalProperties)&&I.IsObject(u.patternProperties)&&(F=>{let H=Object.getOwnPropertyNames(F.patternProperties);return H.length===1&&e(H[0])&&I.IsObject(F.patternProperties)&&D(F.patternProperties[H[0]])})(u)}n.TRecord=ze;function Sn(u){return I.IsObject(u)&&a.Hint in u&&u[a.Hint]==="Recursive"}n.TRecursive=Sn;function qe(u){return w(u,"Ref")&&p(u.$id)&&I.IsString(u.$ref)}n.TRef=qe;function _e(u){return w(u,"String")&&u.type==="string"&&p(u.$id)&&c(u.minLength)&&c(u.maxLength)&&d(u.pattern)&&m(u.format)}n.TString=_e;function Ve(u){return w(u,"Symbol")&&u.type==="symbol"&&p(u.$id)}n.TSymbol=Ve;function oe(u){return w(u,"TemplateLiteral")&&u.type==="string"&&I.IsString(u.pattern)&&u.pattern[0]==="^"&&u.pattern[u.pattern.length-1]==="$"}n.TTemplateLiteral=oe;function He(u){return w(u,"This")&&p(u.$id)&&I.IsString(u.$ref)}n.TThis=He;function Ee(u){return I.IsObject(u)&&a.Transform in u}n.TTransform=Ee;function M(u){return w(u,"Tuple")&&u.type==="array"&&p(u.$id)&&I.IsNumber(u.minItems)&&I.IsNumber(u.maxItems)&&u.minItems===u.maxItems&&(I.IsUndefined(u.items)&&I.IsUndefined(u.additionalItems)&&u.minItems===0||I.IsArray(u.items)&&u.items.every(F=>D(F)))}n.TTuple=M;function Je(u){return w(u,"Undefined")&&u.type==="undefined"&&p(u.$id)}n.TUndefined=Je;function Un(u){return ue(u)&&u.anyOf.every(F=>Y(F)||Me(F))}n.TUnionLiteral=Un;function ue(u){return w(u,"Union")&&p(u.$id)&&I.IsObject(u)&&I.IsArray(u.anyOf)&&u.anyOf.every(F=>D(F))}n.TUnion=ue;function ye(u){return w(u,"Uint8Array")&&u.type==="Uint8Array"&&p(u.$id)&&c(u.minByteLength)&&c(u.maxByteLength)}n.TUint8Array=ye;function q(u){return w(u,"Unknown")&&p(u.$id)}n.TUnknown=q;function Ze(u){return w(u,"Unsafe")}n.TUnsafe=Ze;function Le(u){return w(u,"Void")&&u.type==="void"&&p(u.$id)}n.TVoid=Le;function wn(u){return I.IsObject(u)&&u[a.Readonly]==="Readonly"}n.TReadonly=wn;function En(u){return I.IsObject(u)&&u[a.Optional]==="Optional"}n.TOptional=En;function D(u){return I.IsObject(u)&&(v(u)||P(u)||U(u)||O(u)||y(u)||L(u)||A(u)||R(u)||B(u)||k(u)||ee(u)||ne(u)||De(u)||z(u)||Se(u)||Ue(u)||de(u)||we(u)||ze(u)||qe(u)||_e(u)||Ve(u)||oe(u)||He(u)||M(u)||Je(u)||ue(u)||ye(u)||q(u)||Ze(u)||Le(u)||ie(u)&&Rn.Has(u[a.Kind]))}n.TSchema=D})(s||(a.TypeGuard=s={}));var zn;(function(n){function e(t){return t[a.Kind]==="Intersect"?t.allOf.every(o=>e(o)):t[a.Kind]==="Union"?t.anyOf.some(o=>e(o)):t[a.Kind]==="Undefined"?!0:t[a.Kind]==="Not"?!e(t.not):!1}n.Check=e})(zn||(a.ExtendsUndefined=zn={}));var We=class extends W{};a.TypeExtendsError=We;var T;(function(n){n[n.Union=0]="Union",n[n.True=1]="True",n[n.False=2]="False"})(T||(a.TypeExtendsResult=T={}));var se;(function(n){function e(r){return r===T.False?r:T.True}function t(r){throw new We(r)}function o(r){return s.TNever(r)||s.TIntersect(r)||s.TUnion(r)||s.TUnknown(r)||s.TAny(r)}function f(r,i){return s.TNever(i)?w(r,i):s.TIntersect(i)?R(r,i):s.TUnion(i)?Ln(r,i):s.TUnknown(i)?Kn(r,i):s.TAny(i)?c(r,i):t("StructuralRight")}function c(r,i){return T.True}function l(r,i){return s.TIntersect(i)?R(r,i):s.TUnion(i)&&i.anyOf.some(N=>s.TAny(N)||s.TUnknown(N))?T.True:s.TUnion(i)?T.Union:s.TUnknown(i)||s.TAny(i)?T.True:T.Union}function p(r,i){return s.TUnknown(r)?T.False:s.TAny(r)?T.Union:s.TNever(r)?T.True:T.False}function d(r,i){return s.TObject(i)&&oe(i)?T.True:o(i)?f(r,i):s.TArray(i)?e(C(r.items,i.items)):T.False}function m(r,i){return o(i)?f(r,i):s.TAsyncIterator(i)?e(C(r.items,i.items)):T.False}function b(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TBigInt(i)?T.True:T.False}function v(r,i){return s.TLiteral(r)&&I.IsBoolean(r.const)||s.TBoolean(r)?T.True:T.False}function P(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TBoolean(i)?T.True:T.False}function y(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TConstructor(i)?r.parameters.length>i.parameters.length?T.False:r.parameters.every((N,Z)=>e(C(i.parameters[Z],N))===T.True)?e(C(r.returns,i.returns)):T.False:T.False}function O(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TDate(i)?T.True:T.False}function U(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TFunction(i)?r.parameters.length>i.parameters.length?T.False:r.parameters.every((N,Z)=>e(C(i.parameters[Z],N))===T.True)?e(C(r.returns,i.returns)):T.False:T.False}function L(r,i){return s.TLiteral(r)&&I.IsNumber(r.const)||s.TNumber(r)||s.TInteger(r)?T.True:T.False}function A(r,i){return s.TInteger(i)||s.TNumber(i)?T.True:o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):T.False}function R(r,i){return i.allOf.every(N=>C(r,N)===T.True)?T.True:T.False}function B(r,i){return r.allOf.some(N=>C(N,i)===T.True)?T.True:T.False}function k(r,i){return o(i)?f(r,i):s.TIterator(i)?e(C(r.items,i.items)):T.False}function ee(r,i){return s.TLiteral(i)&&i.const===r.const?T.True:o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TString(i)?Le(r,i):s.TNumber(i)?ne(r,i):s.TInteger(i)?L(r,i):s.TBoolean(i)?v(r,i):T.False}function w(r,i){return T.False}function ie(r,i){return T.True}function Y(r){let[i,N]=[r,0];for(;s.TNot(i);)i=i.not,N+=1;return N%2===0?i:a.Type.Unknown()}function Me(r,i){return s.TNot(r)?C(Y(r),i):s.TNot(i)?C(r,Y(i)):t("Invalid fallthrough for Not")}function Pn(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TNull(i)?T.True:T.False}function ne(r,i){return s.TLiteralNumber(r)||s.TNumber(r)||s.TInteger(r)?T.True:T.False}function De(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TInteger(i)||s.TNumber(i)?T.True:T.False}function z(r,i){return Object.getOwnPropertyNames(r.properties).length===i}function Se(r){return oe(r)}function Ue(r){return z(r,0)||z(r,1)&&"description"in r.properties&&s.TUnion(r.properties.description)&&r.properties.description.anyOf.length===2&&(s.TString(r.properties.description.anyOf[0])&&s.TUndefined(r.properties.description.anyOf[1])||s.TString(r.properties.description.anyOf[1])&&s.TUndefined(r.properties.description.anyOf[0]))}function de(r){return z(r,0)}function we(r){return z(r,0)}function ze(r){return z(r,0)}function Sn(r){return z(r,0)}function qe(r){return oe(r)}function _e(r){let i=a.Type.Number();return z(r,0)||z(r,1)&&"length"in r.properties&&e(C(r.properties.length,i))===T.True}function Ve(r){return z(r,0)}function oe(r){let i=a.Type.Number();return z(r,0)||z(r,1)&&"length"in r.properties&&e(C(r.properties.length,i))===T.True}function He(r){let i=a.Type.Function([a.Type.Any()],a.Type.Any());return z(r,0)||z(r,1)&&"then"in r.properties&&e(C(r.properties.then,i))===T.True}function Ee(r,i){return C(r,i)===T.False||s.TOptional(r)&&!s.TOptional(i)?T.False:T.True}function M(r,i){return s.TUnknown(r)?T.False:s.TAny(r)?T.Union:s.TNever(r)||s.TLiteralString(r)&&Se(i)||s.TLiteralNumber(r)&&de(i)||s.TLiteralBoolean(r)&&we(i)||s.TSymbol(r)&&Ue(i)||s.TBigInt(r)&&ze(i)||s.TString(r)&&Se(i)||s.TSymbol(r)&&Ue(i)||s.TNumber(r)&&de(i)||s.TInteger(r)&&de(i)||s.TBoolean(r)&&we(i)||s.TUint8Array(r)&&qe(i)||s.TDate(r)&&Sn(i)||s.TConstructor(r)&&Ve(i)||s.TFunction(r)&&_e(i)?T.True:s.TRecord(r)&&s.TString(ue(r))?i[a.Hint]==="Record"?T.True:T.False:s.TRecord(r)&&s.TNumber(ue(r))?z(i,0)?T.True:T.False:T.False}function Je(r,i){return o(i)?f(r,i):s.TRecord(i)?q(r,i):s.TObject(i)?(()=>{for(let N of Object.getOwnPropertyNames(i.properties)){if(!(N in r.properties)&&!s.TOptional(i.properties[N]))return T.False;if(s.TOptional(i.properties[N]))return T.True;if(Ee(r.properties[N],i.properties[N])===T.False)return T.False}return T.True})():T.False}function Un(r,i){return o(i)?f(r,i):s.TObject(i)&&He(i)?T.True:s.TPromise(i)?e(C(r.item,i.item)):T.False}function ue(r){return a.PatternNumberExact in r.patternProperties?a.Type.Number():a.PatternStringExact in r.patternProperties?a.Type.String():t("Unknown record key pattern")}function ye(r){return a.PatternNumberExact in r.patternProperties?r.patternProperties[a.PatternNumberExact]:a.PatternStringExact in r.patternProperties?r.patternProperties[a.PatternStringExact]:t("Unable to get record value schema")}function q(r,i){let[N,Z]=[ue(i),ye(i)];return s.TLiteralString(r)&&s.TNumber(N)&&e(C(r,Z))===T.True?T.True:s.TUint8Array(r)&&s.TNumber(N)||s.TString(r)&&s.TNumber(N)||s.TArray(r)&&s.TNumber(N)?C(r,Z):s.TObject(r)?(()=>{for(let xt of Object.getOwnPropertyNames(r.properties))if(Ee(Z,r.properties[xt])===T.False)return T.False;return T.True})():T.False}function Ze(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?C(ye(r),ye(i)):T.False}function Le(r,i){return s.TLiteral(r)&&I.IsString(r.const)||s.TString(r)?T.True:T.False}function wn(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TString(i)?T.True:T.False}function En(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TSymbol(i)?T.True:T.False}function D(r,i){return s.TTemplateLiteral(r)?C(G.Resolve(r),i):s.TTemplateLiteral(i)?C(r,G.Resolve(i)):t("Invalid fallthrough for TemplateLiteral")}function u(r,i){return s.TArray(i)&&r.items!==void 0&&r.items.every(N=>C(N,i.items)===T.True)}function F(r,i){return s.TNever(r)?T.True:s.TUnknown(r)?T.False:s.TAny(r)?T.Union:T.False}function H(r,i){return o(i)?f(r,i):s.TObject(i)&&oe(i)||s.TArray(i)&&u(r,i)?T.True:s.TTuple(i)?I.IsUndefined(r.items)&&!I.IsUndefined(i.items)||!I.IsUndefined(r.items)&&I.IsUndefined(i.items)?T.False:I.IsUndefined(r.items)&&!I.IsUndefined(i.items)||r.items.every((N,Z)=>C(N,i.items[Z])===T.True)?T.True:T.False:T.False}function yt(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TUint8Array(i)?T.True:T.False}function mt(r,i){return o(i)?f(r,i):s.TObject(i)?M(r,i):s.TRecord(i)?q(r,i):s.TVoid(i)?vt(r,i):s.TUndefined(i)?T.True:T.False}function Ln(r,i){return i.anyOf.some(N=>C(r,N)===T.True)?T.True:T.False}function gt(r,i){return r.anyOf.every(N=>C(N,i)===T.True)?T.True:T.False}function Kn(r,i){return T.True}function bt(r,i){return s.TNever(i)?w(r,i):s.TIntersect(i)?R(r,i):s.TUnion(i)?Ln(r,i):s.TAny(i)?c(r,i):s.TString(i)?Le(r,i):s.TNumber(i)?ne(r,i):s.TInteger(i)?L(r,i):s.TBoolean(i)?v(r,i):s.TArray(i)?p(r,i):s.TTuple(i)?F(r,i):s.TObject(i)?M(r,i):s.TUnknown(i)?T.True:T.False}function vt(r,i){return s.TUndefined(r)||s.TUndefined(r)?T.True:T.False}function It(r,i){return s.TIntersect(i)?R(r,i):s.TUnion(i)?Ln(r,i):s.TUnknown(i)?Kn(r,i):s.TAny(i)?c(r,i):s.TObject(i)?M(r,i):s.TVoid(i)?T.True:T.False}function C(r,i){return s.TTemplateLiteral(r)||s.TTemplateLiteral(i)?D(r,i):s.TNot(r)||s.TNot(i)?Me(r,i):s.TAny(r)?l(r,i):s.TArray(r)?d(r,i):s.TBigInt(r)?b(r,i):s.TBoolean(r)?P(r,i):s.TAsyncIterator(r)?m(r,i):s.TConstructor(r)?y(r,i):s.TDate(r)?O(r,i):s.TFunction(r)?U(r,i):s.TInteger(r)?A(r,i):s.TIntersect(r)?B(r,i):s.TIterator(r)?k(r,i):s.TLiteral(r)?ee(r,i):s.TNever(r)?ie(r,i):s.TNull(r)?Pn(r,i):s.TNumber(r)?De(r,i):s.TObject(r)?Je(r,i):s.TRecord(r)?Ze(r,i):s.TString(r)?wn(r,i):s.TSymbol(r)?En(r,i):s.TTuple(r)?H(r,i):s.TPromise(r)?Un(r,i):s.TUint8Array(r)?yt(r,i):s.TUndefined(r)?mt(r,i):s.TUnion(r)?gt(r,i):s.TUnknown(r)?bt(r,i):s.TVoid(r)?It(r,i):t(`Unknown left type operand '${r[a.Kind]}'`)}function Ot(r,i){return C(r,i)}n.Extends=Ot})(se||(a.TypeExtends=se={}));var x;(function(n){function e(d){return d.map(m=>c(m))}function t(d){return new Date(d.getTime())}function o(d){return new Uint8Array(d)}function f(d){let m=Object.getOwnPropertyNames(d).reduce((v,P)=>({...v,[P]:c(d[P])}),{}),b=Object.getOwnPropertySymbols(d).reduce((v,P)=>({...v,[P]:c(d[P])}),{});return{...m,...b}}function c(d){return I.IsArray(d)?e(d):I.IsDate(d)?t(d):I.IsUint8Array(d)?o(d):I.IsObject(d)?f(d):d}function l(d){return d.map(m=>p(m))}n.Rest=l;function p(d,m={}){return{...c(d),...m}}n.Type=p})(x||(a.TypeClone=x={}));var Nn;(function(n){function e(y){return y.map(O=>{let{[a.Optional]:U,...L}=x.Type(O);return L})}function t(y){return y.every(O=>s.TOptional(O))}function o(y){return y.some(O=>s.TOptional(O))}function f(y){return t(y.allOf)?a.Type.Optional(a.Type.Intersect(e(y.allOf))):y}function c(y){return o(y.anyOf)?a.Type.Optional(a.Type.Union(e(y.anyOf))):y}function l(y){return y[a.Kind]==="Intersect"?f(y):y[a.Kind]==="Union"?c(y):y}function p(y,O){let U=y.allOf.reduce((L,A)=>{let R=v(A,O);return R[a.Kind]==="Never"?L:[...L,R]},[]);return l(a.Type.Intersect(U))}function d(y,O){let U=y.anyOf.map(L=>v(L,O));return l(a.Type.Union(U))}function m(y,O){let U=y.properties[O];return I.IsUndefined(U)?a.Type.Never():a.Type.Union([U])}function b(y,O){let U=y.items;if(I.IsUndefined(U))return a.Type.Never();let L=U[O];return I.IsUndefined(L)?a.Type.Never():L}function v(y,O){return y[a.Kind]==="Intersect"?p(y,O):y[a.Kind]==="Union"?d(y,O):y[a.Kind]==="Object"?m(y,O):y[a.Kind]==="Tuple"?b(y,O):a.Type.Never()}function P(y,O,U={}){let L=O.map(A=>v(y,A.toString()));return l(a.Type.Union(L,U))}n.Resolve=P})(Nn||(a.IndexedAccessor=Nn={}));var me;(function(n){function e(b){let[v,P]=[b.slice(0,1),b.slice(1)];return`${v.toLowerCase()}${P}`}function t(b){let[v,P]=[b.slice(0,1),b.slice(1)];return`${v.toUpperCase()}${P}`}function o(b){return b.toUpperCase()}function f(b){return b.toLowerCase()}function c(b,v){let P=be.ParseExact(b.pattern);if(!ve.Check(P))return{...b,pattern:l(b.pattern,v)};let U=[...Ie.Generate(P)].map(R=>a.Type.Literal(R)),L=p(U,v),A=a.Type.Union(L);return a.Type.TemplateLiteral([A])}function l(b,v){return typeof b=="string"?v==="Uncapitalize"?e(b):v==="Capitalize"?t(b):v==="Uppercase"?o(b):v==="Lowercase"?f(b):b:b.toString()}function p(b,v){if(b.length===0)return[];let[P,...y]=b;return[m(P,v),...p(y,v)]}function d(b,v){return s.TTemplateLiteral(b)?c(b,v):s.TUnion(b)?a.Type.Union(p(b.anyOf,v)):s.TLiteral(b)?a.Type.Literal(l(b.const,v)):b}function m(b,v){return d(b,v)}n.Map=m})(me||(a.Intrinsic=me={}));var ge;(function(n){function e(l,p){return a.Type.Intersect(l.allOf.map(d=>f(d,p)),{...l})}function t(l,p){return a.Type.Union(l.anyOf.map(d=>f(d,p)),{...l})}function o(l,p){return p(l)}function f(l,p){return l[a.Kind]==="Intersect"?e(l,p):l[a.Kind]==="Union"?t(l,p):l[a.Kind]==="Object"?o(l,p):l}function c(l,p,d){return{...f(x.Type(l),p),...d}}n.Map=c})(ge||(a.ObjectMap=ge={}));var Xe;(function(n){function e(m){return m[0]==="^"&&m[m.length-1]==="$"?m.slice(1,m.length-1):m}function t(m,b){return m.allOf.reduce((v,P)=>[...v,...l(P,b)],[])}function o(m,b){let v=m.anyOf.map(P=>l(P,b));return[...v.reduce((P,y)=>y.map(O=>v.every(U=>U.includes(O))?P.add(O):P)[0],new Set)]}function f(m,b){return Object.getOwnPropertyNames(m.properties)}function c(m,b){return b.includePatterns?Object.getOwnPropertyNames(m.patternProperties):[]}function l(m,b){return s.TIntersect(m)?t(m,b):s.TUnion(m)?o(m,b):s.TObject(m)?f(m,b):s.TRecord(m)?c(m,b):[]}function p(m,b){return[...new Set(l(m,b))]}n.ResolveKeys=p;function d(m){return`^(${p(m,{includePatterns:!0}).map(P=>`(${e(P)})`).join("|")})$`}n.ResolvePattern=d})(Xe||(a.KeyResolver=Xe={}));var Qe=class extends W{};a.KeyArrayResolverError=Qe;var Re;(function(n){function e(t){return Array.isArray(t)?t:s.TUnionLiteral(t)?t.anyOf.map(o=>o.const.toString()):s.TLiteral(t)?[t.const]:s.TTemplateLiteral(t)?(()=>{let o=be.ParseExact(t.pattern);if(!ve.Check(o))throw new Qe("Cannot resolve keys from infinite template expression");return[...Ie.Generate(o)]})():[]}n.Resolve=e})(Re||(a.KeyArrayResolver=Re={}));var Bn;(function(n){function*e(o){for(let f of o.anyOf)f[a.Kind]==="Union"?yield*e(f):yield f}function t(o){return a.Type.Union([...e(o)],{...o})}n.Resolve=t})(Bn||(a.UnionResolver=Bn={}));var Ye=class extends W{};a.TemplateLiteralPatternError=Ye;var Ge;(function(n){function e(c){throw new Ye(c)}function t(c){return c.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function o(c,l){return s.TTemplateLiteral(c)?c.pattern.slice(1,c.pattern.length-1):s.TUnion(c)?`(${c.anyOf.map(p=>o(p,l)).join("|")})`:s.TNumber(c)?`${l}${a.PatternNumber}`:s.TInteger(c)?`${l}${a.PatternNumber}`:s.TBigInt(c)?`${l}${a.PatternNumber}`:s.TString(c)?`${l}${a.PatternString}`:s.TLiteral(c)?`${l}${t(c.const.toString())}`:s.TBoolean(c)?`${l}${a.PatternBoolean}`:e(`Unexpected Kind '${c[a.Kind]}'`)}function f(c){return`^${c.map(l=>o(l,"")).join("")}$`}n.Create=f})(Ge||(a.TemplateLiteralPattern=Ge={}));var G;(function(n){function e(t){let o=be.ParseExact(t.pattern);if(!ve.Check(o))return a.Type.String();let f=[...Ie.Generate(o)].map(c=>a.Type.Literal(c));return a.Type.Union(f)}n.Resolve=e})(G||(a.TemplateLiteralResolver=G={}));var Ae=class extends W{};a.TemplateLiteralParserError=Ae;var be;(function(n){function e(y,O,U){return y[O]===U&&y.charCodeAt(O-1)!==92}function t(y,O){return e(y,O,"(")}function o(y,O){return e(y,O,")")}function f(y,O){return e(y,O,"|")}function c(y){if(!(t(y,0)&&o(y,y.length-1)))return!1;let O=0;for(let U=0;U<y.length;U++)if(t(y,U)&&(O+=1),o(y,U)&&(O-=1),O===0&&U!==y.length-1)return!1;return!0}function l(y){return y.slice(1,y.length-1)}function p(y){let O=0;for(let U=0;U<y.length;U++)if(t(y,U)&&(O+=1),o(y,U)&&(O-=1),f(y,U)&&O===0)return!0;return!1}function d(y){for(let O=0;O<y.length;O++)if(t(y,O))return!0;return!1}function m(y){let[O,U]=[0,0],L=[];for(let R=0;R<y.length;R++)if(t(y,R)&&(O+=1),o(y,R)&&(O-=1),f(y,R)&&O===0){let B=y.slice(U,R);B.length>0&&L.push(v(B)),U=R+1}let A=y.slice(U);return A.length>0&&L.push(v(A)),L.length===0?{type:"const",const:""}:L.length===1?L[0]:{type:"or",expr:L}}function b(y){function O(A,R){if(!t(A,R))throw new Ae("TemplateLiteralParser: Index must point to open parens");let B=0;for(let k=R;k<A.length;k++)if(t(A,k)&&(B+=1),o(A,k)&&(B-=1),B===0)return[R,k];throw new Ae("TemplateLiteralParser: Unclosed group parens in expression")}function U(A,R){for(let B=R;B<A.length;B++)if(t(A,B))return[R,B];return[R,A.length]}let L=[];for(let A=0;A<y.length;A++)if(t(y,A)){let[R,B]=O(y,A),k=y.slice(R,B+1);L.push(v(k)),A=B}else{let[R,B]=U(y,A),k=y.slice(R,B);k.length>0&&L.push(v(k)),A=B-1}return L.length===0?{type:"const",const:""}:L.length===1?L[0]:{type:"and",expr:L}}function v(y){return c(y)?v(l(y)):p(y)?m(y):d(y)?b(y):{type:"const",const:y}}n.Parse=v;function P(y){return v(y.slice(1,y.length-1))}n.ParseExact=P})(be||(a.TemplateLiteralParser=be={}));var he=class extends W{};a.TemplateLiteralFiniteError=he;var ve;(function(n){function e(l){throw new he(l)}function t(l){return l.type==="or"&&l.expr.length===2&&l.expr[0].type==="const"&&l.expr[0].const==="0"&&l.expr[1].type==="const"&&l.expr[1].const==="[1-9][0-9]*"}function o(l){return l.type==="or"&&l.expr.length===2&&l.expr[0].type==="const"&&l.expr[0].const==="true"&&l.expr[1].type==="const"&&l.expr[1].const==="false"}function f(l){return l.type==="const"&&l.const===".*"}function c(l){return o(l)?!0:t(l)||f(l)?!1:l.type==="and"?l.expr.every(p=>c(p)):l.type==="or"?l.expr.every(p=>c(p)):l.type==="const"?!0:e("Unknown expression type")}n.Check=c})(ve||(a.TemplateLiteralFinite=ve={}));var en=class extends W{};a.TemplateLiteralGeneratorError=en;var Ie;(function(n){function*e(l){if(l.length===1)return yield*l[0];for(let p of l[0])for(let d of e(l.slice(1)))yield`${p}${d}`}function*t(l){return yield*e(l.expr.map(p=>[...c(p)]))}function*o(l){for(let p of l.expr)yield*c(p)}function*f(l){return yield l.const}function*c(l){return l.type==="and"?yield*t(l):l.type==="or"?yield*o(l):l.type==="const"?yield*f(l):(()=>{throw new en("Unknown expression")})()}n.Generate=c})(Ie||(a.TemplateLiteralGenerator=Ie={}));var jn;(function(n){function*e(c){let l=c.trim().replace(/"|'/g,"");return l==="boolean"?yield a.Type.Boolean():l==="number"?yield a.Type.Number():l==="bigint"?yield a.Type.BigInt():l==="string"?yield a.Type.String():yield(()=>{let p=l.split("|").map(d=>a.Type.Literal(d.trim()));return p.length===0?a.Type.Never():p.length===1?p[0]:a.Type.Union(p)})()}function*t(c){if(c[1]!=="{"){let l=a.Type.Literal("$"),p=o(c.slice(1));return yield*[l,...p]}for(let l=2;l<c.length;l++)if(c[l]==="}"){let p=e(c.slice(2,l)),d=o(c.slice(l+1));return yield*[...p,...d]}yield a.Type.Literal(c)}function*o(c){for(let l=0;l<c.length;l++)if(c[l]==="$"){let p=a.Type.Literal(c.slice(0,l)),d=t(c.slice(l));return yield*[p,...d]}yield a.Type.Literal(c)}function f(c){return[...o(c)]}n.Parse=f})(jn||(a.TemplateLiteralDslParser=jn={}));var nn=class{constructor(e){this.schema=e}Decode(e){return new tn(this.schema,e)}};a.TransformDecodeBuilder=nn;var tn=class{constructor(e,t){this.schema=e,this.decode=t}Encode(e){let t=x.Type(this.schema);return s.TTransform(t)?(()=>{let c={Encode:l=>t[a.Transform].Encode(e(l)),Decode:l=>this.decode(t[a.Transform].Decode(l))};return{...t,[a.Transform]:c}})():(()=>{let o={Decode:this.decode,Encode:e};return{...t,[a.Transform]:o}})()}};a.TransformEncodeBuilder=tn;var Rt=0,rn=class extends W{};a.TypeBuilderError=rn;var on=class{Create(e){return e}Throw(e){throw new rn(e)}Discard(e,t){return t.reduce((o,f)=>{let{[f]:c,...l}=o;return l},e)}Strict(e){return JSON.parse(JSON.stringify(e))}};a.TypeBuilder=on;var Ne=class extends on{ReadonlyOptional(e){return this.Readonly(this.Optional(e))}Readonly(e){return{...x.Type(e),[a.Readonly]:"Readonly"}}Optional(e){return{...x.Type(e),[a.Optional]:"Optional"}}Any(e={}){return this.Create({...e,[a.Kind]:"Any"})}Array(e,t={}){return this.Create({...t,[a.Kind]:"Array",type:"array",items:x.Type(e)})}Boolean(e={}){return this.Create({...e,[a.Kind]:"Boolean",type:"boolean"})}Capitalize(e,t={}){return{...me.Map(x.Type(e),"Capitalize"),...t}}Composite(e,t){let o=a.Type.Intersect(e,{}),c=Xe.ResolveKeys(o,{includePatterns:!1}).reduce((l,p)=>({...l,[p]:a.Type.Index(o,[p])}),{});return a.Type.Object(c,t)}Enum(e,t={}){if(I.IsUndefined(e))return this.Throw("Enum undefined or empty");let o=Object.getOwnPropertyNames(e).filter(l=>isNaN(l)).map(l=>e[l]),c=[...new Set(o)].map(l=>a.Type.Literal(l));return this.Union(c,{...t,[a.Hint]:"Enum"})}Extends(e,t,o,f,c={}){switch(se.Extends(e,t)){case T.Union:return this.Union([x.Type(o,c),x.Type(f,c)]);case T.True:return x.Type(o,c);case T.False:return x.Type(f,c)}}Exclude(e,t,o={}){return s.TTemplateLiteral(e)?this.Exclude(G.Resolve(e),t,o):s.TTemplateLiteral(t)?this.Exclude(e,G.Resolve(t),o):s.TUnion(e)?(()=>{let f=e.anyOf.filter(c=>se.Extends(c,t)===T.False);return f.length===1?x.Type(f[0],o):this.Union(f,o)})():se.Extends(e,t)!==T.False?this.Never(o):x.Type(e,o)}Extract(e,t,o={}){return s.TTemplateLiteral(e)?this.Extract(G.Resolve(e),t,o):s.TTemplateLiteral(t)?this.Extract(e,G.Resolve(t),o):s.TUnion(e)?(()=>{let f=e.anyOf.filter(c=>se.Extends(c,t)!==T.False);return f.length===1?x.Type(f[0],o):this.Union(f,o)})():se.Extends(e,t)!==T.False?x.Type(e,o):this.Never(o)}Index(e,t,o={}){return s.TArray(e)&&s.TNumber(t)?x.Type(e.items,o):s.TTuple(e)&&s.TNumber(t)?(()=>{let c=(I.IsUndefined(e.items)?[]:e.items).map(l=>x.Type(l));return this.Union(c,o)})():(()=>{let f=Re.Resolve(t),c=x.Type(e);return Nn.Resolve(c,f,o)})()}Integer(e={}){return this.Create({...e,[a.Kind]:"Integer",type:"integer"})}Intersect(e,t={}){if(e.length===0)return a.Type.Never();if(e.length===1)return x.Type(e[0],t);e.some(l=>s.TTransform(l))&&this.Throw("Cannot intersect transform types");let o=e.every(l=>s.TObject(l)),f=x.Rest(e),c=s.TSchema(t.unevaluatedProperties)?{unevaluatedProperties:x.Type(t.unevaluatedProperties)}:{};return t.unevaluatedProperties===!1||s.TSchema(t.unevaluatedProperties)||o?this.Create({...t,...c,[a.Kind]:"Intersect",type:"object",allOf:f}):this.Create({...t,...c,[a.Kind]:"Intersect",allOf:f})}KeyOf(e,t={}){return s.TRecord(e)?(()=>{let o=Object.getOwnPropertyNames(e.patternProperties)[0];return o===a.PatternNumberExact?this.Number(t):o===a.PatternStringExact?this.String(t):this.Throw("Unable to resolve key type from Record key pattern")})():s.TTuple(e)?(()=>{let f=(I.IsUndefined(e.items)?[]:e.items).map((c,l)=>a.Type.Literal(l.toString()));return this.Union(f,t)})():s.TArray(e)?this.Number(t):(()=>{let o=Xe.ResolveKeys(e,{includePatterns:!1});if(o.length===0)return this.Never(t);let f=o.map(c=>this.Literal(c));return this.Union(f,t)})()}Literal(e,t={}){return this.Create({...t,[a.Kind]:"Literal",const:e,type:typeof e})}Lowercase(e,t={}){return{...me.Map(x.Type(e),"Lowercase"),...t}}Never(e={}){return this.Create({...e,[a.Kind]:"Never",not:{}})}Not(e,t){return this.Create({...t,[a.Kind]:"Not",not:x.Type(e)})}Null(e={}){return this.Create({...e,[a.Kind]:"Null",type:"null"})}Number(e={}){return this.Create({...e,[a.Kind]:"Number",type:"number"})}Object(e,t={}){let o=Object.getOwnPropertyNames(e),f=o.filter(d=>s.TOptional(e[d])),c=o.filter(d=>!f.includes(d)),l=s.TSchema(t.additionalProperties)?{additionalProperties:x.Type(t.additionalProperties)}:{},p=o.reduce((d,m)=>({...d,[m]:x.Type(e[m])}),{});return c.length>0?this.Create({...t,...l,[a.Kind]:"Object",type:"object",properties:p,required:c}):this.Create({...t,...l,[a.Kind]:"Object",type:"object",properties:p})}Omit(e,t,o={}){let f=Re.Resolve(t);return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),c=>{I.IsArray(c.required)&&(c.required=c.required.filter(l=>!f.includes(l)),c.required.length===0&&delete c.required);for(let l of Object.getOwnPropertyNames(c.properties))f.includes(l)&&delete c.properties[l];return this.Create(c)},o)}Partial(e,t={}){return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),o=>{let f=Object.getOwnPropertyNames(o.properties).reduce((c,l)=>({...c,[l]:this.Optional(o.properties[l])}),{});return this.Object(f,this.Discard(o,["required"]))},t)}Pick(e,t,o={}){let f=Re.Resolve(t);return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),c=>{I.IsArray(c.required)&&(c.required=c.required.filter(l=>f.includes(l)),c.required.length===0&&delete c.required);for(let l of Object.getOwnPropertyNames(c.properties))f.includes(l)||delete c.properties[l];return this.Create(c)},o)}Record(e,t,o={}){return s.TTemplateLiteral(e)?(()=>{let f=be.ParseExact(e.pattern);return ve.Check(f)?this.Object([...Ie.Generate(f)].reduce((c,l)=>({...c,[l]:x.Type(t)}),{}),o):this.Create({...o,[a.Kind]:"Record",type:"object",patternProperties:{[e.pattern]:x.Type(t)}})})():s.TUnion(e)?(()=>{let f=Bn.Resolve(e);if(s.TUnionLiteral(f)){let c=f.anyOf.reduce((l,p)=>({...l,[p.const]:x.Type(t)}),{});return this.Object(c,{...o,[a.Hint]:"Record"})}else this.Throw("Record key of type union contains non-literal types")})():s.TLiteral(e)?I.IsString(e.const)||I.IsNumber(e.const)?this.Object({[e.const]:x.Type(t)},o):this.Throw("Record key of type literal is not of type string or number"):s.TInteger(e)||s.TNumber(e)?this.Create({...o,[a.Kind]:"Record",type:"object",patternProperties:{[a.PatternNumberExact]:x.Type(t)}}):s.TString(e)?(()=>{let f=I.IsUndefined(e.pattern)?a.PatternStringExact:e.pattern;return this.Create({...o,[a.Kind]:"Record",type:"object",patternProperties:{[f]:x.Type(t)}})})():this.Never()}Recursive(e,t={}){I.IsUndefined(t.$id)&&(t.$id=`T${Rt++}`);let o=e({[a.Kind]:"This",$ref:`${t.$id}`});return o.$id=t.$id,this.Create({...t,[a.Hint]:"Recursive",...o})}Ref(e,t={}){return I.IsString(e)?this.Create({...t,[a.Kind]:"Ref",$ref:e}):(I.IsUndefined(e.$id)&&this.Throw("Reference target type must specify an $id"),this.Create({...t,[a.Kind]:"Ref",$ref:e.$id}))}Required(e,t={}){return ge.Map(this.Discard(x.Type(e),["$id",a.Transform]),o=>{let f=Object.getOwnPropertyNames(o.properties).reduce((c,l)=>({...c,[l]:this.Discard(o.properties[l],[a.Optional])}),{});return this.Object(f,o)},t)}Rest(e){return s.TTuple(e)&&!I.IsUndefined(e.items)?x.Rest(e.items):s.TIntersect(e)?x.Rest(e.allOf):s.TUnion(e)?x.Rest(e.anyOf):[]}String(e={}){return this.Create({...e,[a.Kind]:"String",type:"string"})}TemplateLiteral(e,t={}){let o=I.IsString(e)?Ge.Create(jn.Parse(e)):Ge.Create(e);return this.Create({...t,[a.Kind]:"TemplateLiteral",type:"string",pattern:o})}Transform(e){return new nn(e)}Tuple(e,t={}){let[o,f,c]=[!1,e.length,e.length],l=x.Rest(e),p=e.length>0?{...t,[a.Kind]:"Tuple",type:"array",items:l,additionalItems:o,minItems:f,maxItems:c}:{...t,[a.Kind]:"Tuple",type:"array",minItems:f,maxItems:c};return this.Create(p)}Uncapitalize(e,t={}){return{...me.Map(x.Type(e),"Uncapitalize"),...t}}Union(e,t={}){return s.TTemplateLiteral(e)?G.Resolve(e):(()=>{let o=e;if(o.length===0)return this.Never(t);if(o.length===1)return this.Create(x.Type(o[0],t));let f=x.Rest(o);return this.Create({...t,[a.Kind]:"Union",anyOf:f})})()}Unknown(e={}){return this.Create({...e,[a.Kind]:"Unknown"})}Unsafe(e={}){return this.Create({...e,[a.Kind]:e[a.Kind]||"Unsafe"})}Uppercase(e,t={}){return{...me.Map(x.Type(e),"Uppercase"),...t}}};a.JsonTypeBuilder=Ne;var un=class extends Ne{AsyncIterator(e,t={}){return this.Create({...t,[a.Kind]:"AsyncIterator",type:"AsyncIterator",items:x.Type(e)})}Awaited(e,t={}){let o=f=>f.length>0?(()=>{let[c,...l]=f;return[this.Awaited(c),...o(l)]})():f;return s.TIntersect(e)?a.Type.Intersect(o(e.allOf)):s.TUnion(e)?a.Type.Union(o(e.anyOf)):s.TPromise(e)?this.Awaited(e.item):x.Type(e,t)}BigInt(e={}){return this.Create({...e,[a.Kind]:"BigInt",type:"bigint"})}ConstructorParameters(e,t={}){return this.Tuple([...e.parameters],{...t})}Constructor(e,t,o){let[f,c]=[x.Rest(e),x.Type(t)];return this.Create({...o,[a.Kind]:"Constructor",type:"Constructor",parameters:f,returns:c})}Date(e={}){return this.Create({...e,[a.Kind]:"Date",type:"Date"})}Function(e,t,o){let[f,c]=[x.Rest(e),x.Type(t)];return this.Create({...o,[a.Kind]:"Function",type:"Function",parameters:f,returns:c})}InstanceType(e,t={}){return x.Type(e.returns,t)}Iterator(e,t={}){return this.Create({...t,[a.Kind]:"Iterator",type:"Iterator",items:x.Type(e)})}Parameters(e,t={}){return this.Tuple(e.parameters,{...t})}Promise(e,t={}){return this.Create({...t,[a.Kind]:"Promise",type:"Promise",item:x.Type(e)})}RegExp(e,t={}){let o=I.IsString(e)?e:e.source;return this.Create({...t,[a.Kind]:"String",type:"string",pattern:o})}RegEx(e,t={}){return this.RegExp(e,t)}ReturnType(e,t={}){return x.Type(e.returns,t)}Symbol(e){return this.Create({...e,[a.Kind]:"Symbol",type:"symbol"})}Undefined(e={}){return this.Create({...e,[a.Kind]:"Undefined",type:"undefined"})}Uint8Array(e={}){return this.Create({...e,[a.Kind]:"Uint8Array",type:"Uint8Array"})}Void(e={}){return this.Create({...e,[a.Kind]:"Void",type:"void"})}};a.JavaScriptTypeBuilder=un;a.JsonType=new Ne;a.Type=new un});var ft=Mn((si,lt)=>{"use strict";function g(n){if(!(this instanceof g))return new g(n);this._=n}var S=g.prototype;function Yn(n,e){var t=0;for(t;t<n;t++)e(t)}function $t(n,e){Yn(e.length,function(t){n(e[t],t,e)})}function fe(n,e,t){return $t(function(o,f,c){e=n(e,o,f,c)},t),e}function te(n,e){return fe(function(t,o,f,c){return t.concat([n(o,f,c)])},[],e)}function Kt(n){var e=fe(function(t,o,f,c){return t.concat(f===c.length-1?Buffer.from([o,0]).readUInt16BE(0):c.readUInt16BE(f))},[],n);return Buffer.from(te(function(t){return(t<<1&65535)>>8},e))}function kt(n,e){var t={v:0,buf:e};return Yn(n,function(){t={v:t.v<<1|Mt(t.buf),buf:Kt(t.buf)}}),t}function Mt(n){return n[0]>>7}function Dt(n){return fe(function(e,t){return e+t},0,n)}function zt(n,e){return fe(function(t,o){return t||(n(o)?o:t)},null,e)}function Gn(){return typeof Buffer<"u"}function qt(){if(g._supportsSet!==void 0)return g._supportsSet;var n=typeof Set<"u";return g._supportsSet=n,n}function mn(){if(!Gn())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function hn(n){mn();var e=Dt(n);if(e%8!==0)throw new Error("The bits ["+n.join(", ")+"] add up to "+e+" which is not an even number of bytes; the total should be divisible by 8");var t=e/8,o=zt(function(f){return f>48},n);if(o)throw new Error(o+" bit range requested exceeds 48 bit (6 byte) Number max.");return new g(function(f,c){var l=t+c;return l>f.length?V(c,t.toString()+" bytes"):$(l,fe(function(p,d){var m=kt(d,p.buf);return{coll:p.coll.concat(m.v),buf:m.buf}},{coll:[],buf:f.slice(c,l)},n).coll)})}function _t(n){mn();var e={},t=0,o=te(function(l){if(Oe(l)){var p=l;if(p.length!==2)throw new Error("["+p.join(", ")+"] should be length 2, got length "+p.length);if(Fe(p[0]),Pe(p[1]),Object.prototype.hasOwnProperty.call(e,p[0]))throw new Error("duplicate key in bitSeqObj: "+p[0]);return e[p[0]]=!0,t++,p}else return Pe(l),[null,l]},n);if(t<1)throw new Error("bitSeqObj expects at least one named pair, got ["+n.join(", ")+"]");var f=te(function(l){return l[0]},o),c=te(function(l){return l[1]},o);return hn(c).map(function(l){var p=te(function(d,m){return[d,l[m]]},f);return fe(function(d,m){return m[0]!==null&&(d[m[0]]=m[1]),d},{},p)})}function Q(n,e){return new g(function(t,o){return mn(),o+e>t.length?V(o,e+" bytes for "+n):$(o+e,t.slice(o,o+e))})}function Vt(n){return Q("buffer",n).map(function(e){return Buffer.from(e)})}function Ht(n,e){return Q("string",e).map(function(t){return t.toString(n)})}function Jt(n){return typeof n=="number"&&Math.floor(n)===n}function gn(n,e){if(!Jt(e)||e<0||e>6)throw new Error(n+" requires integer length in range [0, 6].")}function sn(n){return gn("uintBE",n),Q("uintBE("+n+")",n).map(function(e){return e.readUIntBE(0,n)})}function cn(n){return gn("uintLE",n),Q("uintLE("+n+")",n).map(function(e){return e.readUIntLE(0,n)})}function ln(n){return gn("intBE",n),Q("intBE("+n+")",n).map(function(e){return e.readIntBE(0,n)})}function fn(n){return gn("intLE",n),Q("intLE("+n+")",n).map(function(e){return e.readIntLE(0,n)})}function Zt(){return Q("floatBE",4).map(function(n){return n.readFloatBE(0)})}function Wt(){return Q("floatLE",4).map(function(n){return n.readFloatLE(0)})}function Xt(){return Q("doubleBE",8).map(function(n){return n.readDoubleBE(0)})}function Qt(){return Q("doubleLE",8).map(function(n){return n.readDoubleLE(0)})}function Yt(n){return Array.prototype.slice.call(n)}function $e(n){return n instanceof g}function Oe(n){return{}.toString.call(n)==="[object Array]"}function Ce(n){return Gn()&&Buffer.isBuffer(n)}function $(n,e){return{status:!0,index:n,value:e,furthest:-1,expected:[]}}function V(n,e){return Oe(e)||(e=[e]),{status:!1,index:-1,value:null,furthest:n,expected:e}}function J(n,e){if(!e||n.furthest>e.furthest)return n;var t=n.furthest===e.furthest?Gt(n.expected,e.expected):e.expected;return{status:n.status,index:n.index,value:n.value,furthest:e.furthest,expected:t}}var Tn={};function et(n,e){if(Ce(n))return{offset:e,line:-1,column:-1};n in Tn||(Tn[n]={});for(var t=Tn[n],o=0,f=0,c=0,l=e;l>=0;){if(l in t){o=t[l].line,c===0&&(c=t[l].lineStart);break}(n.charAt(l)===`
`||n.charAt(l)==="\r"&&n.charAt(l+1)!==`
`)&&(f++,c===0&&(c=l+1)),l--}var p=o+f,d=e-c;return t[e]={line:p,lineStart:c},{offset:e,line:p+1,column:d+1}}function Gt(n,e){if(qt()&&Array.from){for(var t=new Set(n),o=0;o<e.length;o++)t.add(e[o]);var f=Array.from(t);return f.sort(),f}for(var c={},l=0;l<n.length;l++)c[n[l]]=!0;for(var p=0;p<e.length;p++)c[e[p]]=!0;var d=[];for(var m in c)({}).hasOwnProperty.call(c,m)&&d.push(m);return d.sort(),d}function xe(n){if(!$e(n))throw new Error("not a parser: "+n)}function bn(n,e){return typeof n=="string"?n.charAt(e):n[e]}function ht(n){if(!Oe(n))throw new Error("not an array: "+n)}function Pe(n){if(typeof n!="number")throw new Error("not a number: "+n)}function er(n){if(!(n instanceof RegExp))throw new Error("not a regexp: "+n);for(var e=tt(n),t=0;t<e.length;t++){var o=e.charAt(t);if(o!=="i"&&o!=="m"&&o!=="u"&&o!=="s")throw new Error('unsupported regexp flag "'+o+'": '+n)}}function le(n){if(typeof n!="function")throw new Error("not a function: "+n)}function Fe(n){if(typeof n!="string")throw new Error("not a string: "+n)}var nr=2,tr=3,re=8,rr=re*5,ir=re*4,Xn="  ";function dn(n,e){return new Array(e+1).join(n)}function or(n){return n.length===1?`Expected:

`+n[0]:`Expected one of the following: 

`+n.join(", ")}function pn(n,e,t){var o=e-n.length;return o<=0?n:dn(t,o)+n}function ur(n,e){var t=n.length,o=[],f=0;if(t<=e)return[n.slice()];for(var c=0;c<t;c++)o[f]||o.push([]),o[f].push(n[c]),(c+1)%e===0&&f++;return o}function Qn(n,e,t,o){return{from:n-e>0?n-e:0,to:n+t>o?o:n+t}}function ar(n){return n.from===0&&n.to===1?{from:n.from,to:n.to}:{from:n.from/re,to:Math.floor(n.to/re)}}function sr(n,e){var t=e.index,o=t.offset,f=1,c,l,p,d,m;if(o===n.length)return"Got the end of the input";if(Ce(n)){var b=o-o%re,v=o-b,P=Qn(b,rr,ir+re,n.length),y=n.slice(P.from,P.to),O=ur(y.toJSON().data,re),U=te(function(B){return te(function(k){return pn(k.toString(16),2,"0")},B)},O);d=ar(P),l=b/re,c=v*3,v>=4&&(c+=1),f=2,p=te(function(B){return B.length<=4?B.join(" "):B.slice(0,4).join(" ")+"  "+B.slice(4).join(" ")},U),m=((d.to>0?d.to-1:d.to)*8).toString(16).length,m<2&&(m=2)}else{var L=n.split(/\r\n|[\n\r\u2028\u2029]/);c=t.column-1,l=t.line-1,d=Qn(l,nr,tr,L.length),p=L.slice(d.from,d.to),m=d.to.toString().length}var A=l-d.from;Ce(n)&&(m=((d.to>0?d.to-1:d.to)*8).toString(16).length,m<2&&(m=2));var R=fe(function(B,k,ee){var w=ee===A,ie=w?"> ":Xn,Y;return Ce(n)?Y=pn(((d.from+ee)*8).toString(16),m,"0"):Y=pn((d.from+ee+1).toString(),m," "),[].concat(B,[ie+Y+" | "+k],w?[Xn+dn(" ",m)+" | "+pn("",c," ")+dn("^",f)]:[])},[],p);return R.join(`
`)}function nt(n,e){return[`
`,"-- PARSING FAILED "+dn("-",50),`

`,sr(n,e),`

`,or(e.expected),`
`].join("")}function tt(n){return n.flags!==void 0?n.flags:[n.global?"g":"",n.ignoreCase?"i":"",n.multiline?"m":"",n.unicode?"u":"",n.sticky?"y":""].join("")}function cr(n){return RegExp("^(?:"+n.source+")",tt(n))}function vn(){for(var n=[].slice.call(arguments),e=n.length,t=0;t<e;t+=1)xe(n[t]);return g(function(o,f){for(var c,l=new Array(e),p=0;p<e;p+=1){if(c=J(n[p]._(o,f),c),!c.status)return c;l[p]=c.value,f=c.index}return J($(f,l),c)})}function lr(){for(var n={},e=0,t=Yt(arguments),o=t.length,f=0;f<o;f+=1){var c=t[f];if(!$e(c)){if(Oe(c)){var l=c.length===2&&typeof c[0]=="string"&&$e(c[1]);if(l){var p=c[0];if(Object.prototype.hasOwnProperty.call(n,p))throw new Error("seqObj: duplicate key "+p);n[p]=!0,e++;continue}}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(e===0)throw new Error("seqObj expects at least one named parser, found zero");return g(function(d,m){for(var b,v={},P=0;P<o;P+=1){var y,O;if(Oe(t[P])?(y=t[P][0],O=t[P][1]):(y=null,O=t[P]),b=J(O._(d,m),b),!b.status)return b;y&&(v[y]=b.value),m=b.index}return J($(m,v),b)})}function pe(){var n=[].slice.call(arguments);if(n.length===0)throw new Error("seqMap needs at least one argument");var e=n.pop();return le(e),vn.apply(null,n).map(function(t){return e.apply(null,t)})}function fr(n){var e={};for(var t in n)({}).hasOwnProperty.call(n,t)&&function(o){var f=function(){return n[o](e)};e[o]=ot(f)}(t);return e}function In(){var n=[].slice.call(arguments),e=n.length;if(e===0)return On("zero alternates");for(var t=0;t<e;t+=1)xe(n[t]);return g(function(o,f){for(var c,l=0;l<n.length;l+=1)if(c=J(n[l]._(o,f),c),c.status)return c;return c})}function rt(n,e){return Cn(n,e).or(Te([]))}function Cn(n,e){xe(n),xe(e);var t=e.then(n).many();return pe(n,t,function(o,f){return[o].concat(f)})}S.parse=function(n){if(typeof n!="string"&&!Ce(n))throw new Error(".parse must be called with a string or Buffer as its argument");var e=this.skip($n)._(n,0),t;return e.status?t={status:!0,value:e.value}:t={status:!1,index:et(n,e.furthest),expected:e.expected},delete Tn[n],t};S.tryParse=function(n){var e=this.parse(n);if(e.status)return e.value;var t=nt(n,e),o=new Error(t);throw o.type="ParsimmonError",o.result=e,o};S.assert=function(n,e){return this.chain(function(t){return n(t)?Te(t):On(e)})};S.or=function(n){return In(this,n)};S.trim=function(n){return this.wrap(n,n)};S.wrap=function(n,e){return pe(n,this,e,function(t,o){return o})};S.thru=function(n){return n(this)};S.then=function(n){return xe(n),vn(this,n).map(function(e){return e[1]})};S.many=function(){var n=this;return g(function(e,t){for(var o=[],f=void 0;;)if(f=J(n._(e,t),f),f.status){if(t===f.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");t=f.index,o.push(f.value)}else return J($(t,o),f)})};S.tieWith=function(n){return Fe(n),this.map(function(e){if(ht(e),e.length){Fe(e[0]);for(var t=e[0],o=1;o<e.length;o++)Fe(e[o]),t+=n+e[o];return t}else return""})};S.tie=function(){return this.tieWith("")};S.times=function(n,e){var t=this;return arguments.length<2&&(e=n),Pe(n),Pe(e),g(function(o,f){for(var c=[],l=void 0,p=void 0,d=0;d<n;d+=1)if(l=t._(o,f),p=J(l,p),l.status)f=l.index,c.push(l.value);else return p;for(;d<e&&(l=t._(o,f),p=J(l,p),l.status);d+=1)f=l.index,c.push(l.value);return J($(f,c),p)})};S.result=function(n){return this.map(function(){return n})};S.atMost=function(n){return this.times(0,n)};S.atLeast=function(n){return pe(this.times(n),this.many(),function(e,t){return e.concat(t)})};S.map=function(n){le(n);var e=this;return g(function(t,o){var f=e._(t,o);return f.status?J($(f.index,n(f.value)),f):f})};S.contramap=function(n){le(n);var e=this;return g(function(t,o){var f=e.parse(n(t.slice(o)));return f.status?$(o+t.length,f.value):f})};S.promap=function(n,e){return le(n),le(e),this.contramap(n).map(e)};S.skip=function(n){return vn(this,n).map(function(e){return e[0]})};S.mark=function(){return pe(Ke,this,Ke,function(n,e,t){return{start:n,value:e,end:t}})};S.node=function(n){return pe(Ke,this,Ke,function(e,t,o){return{name:n,value:t,start:e,end:o}})};S.sepBy=function(n){return rt(this,n)};S.sepBy1=function(n){return Cn(this,n)};S.lookahead=function(n){return this.skip(yn(n))};S.notFollowedBy=function(n){return this.skip(it(n))};S.desc=function(n){Oe(n)||(n=[n]);var e=this;return g(function(t,o){var f=e._(t,o);return f.status||(f.expected=n),f})};S.fallback=function(n){return this.or(Te(n))};S.ap=function(n){return pe(n,this,function(e,t){return e(t)})};S.chain=function(n){var e=this;return g(function(t,o){var f=e._(t,o);if(!f.status)return f;var c=n(f.value);return J(c._(t,f.index),f)})};function ke(n){Fe(n);var e="'"+n+"'";return g(function(t,o){var f=o+n.length,c=t.slice(o,f);return c===n?$(f,c):V(o,e)})}function pr(n){if(mn(),Pe(n),n>255)throw new Error("Value specified to byte constructor ("+n+"=0x"+n.toString(16)+") is larger in value than a single byte.");var e=(n>15?"0x":"0x0")+n.toString(16);return g(function(t,o){var f=bn(t,o);return f===n?$(o+1,f):V(o,e)})}function h(n,e){er(n),arguments.length>=2?Pe(e):e=0;var t=cr(n),o=""+n;return g(function(f,c){var l=t.exec(f.slice(c));if(l){if(0<=e&&e<=l.length){var p=l[0],d=l[e];return $(c+p.length,d)}var m="valid match group (0 to "+l.length+") in "+o;return V(c,m)}return V(c,o)})}function Te(n){return g(function(e,t){return $(t,n)})}function On(n){return g(function(e,t){return V(t,n)})}function yn(n){if($e(n))return g(function(e,t){var o=n._(e,t);return o.index=t,o.value="",o});if(typeof n=="string")return yn(ke(n));if(n instanceof RegExp)return yn(h(n));throw new Error("not a string, regexp, or parser: "+n)}function it(n){return xe(n),g(function(e,t){var o=n._(e,t),f=e.slice(t,o.index);return o.status?V(t,'not "'+f+'"'):$(t,null)})}function xn(n){return le(n),g(function(e,t){var o=bn(e,t);return t<e.length&&n(o)?$(t+1,o):V(t,"a character/byte matching "+n)})}function Tr(n){for(var e=n.split(""),t=0;t<e.length;t++)e[t]="'"+e[t]+"'";return xn(function(o){return n.indexOf(o)>=0}).desc(e)}function dr(n){return xn(function(e){return n.indexOf(e)<0}).desc("none of '"+n+"'")}function yr(n){return g(n($,V))}function mr(n,e){return xn(function(t){return n<=t&&t<=e}).desc(n+"-"+e)}function gr(n){return le(n),g(function(e,t){for(var o=t;o<e.length&&n(bn(e,o));)o++;return $(o,e.slice(t,o))})}function ot(n,e){arguments.length<2&&(e=n,n=void 0);var t=g(function(o,f){return t._=e()._,t._(o,f)});return n?t.desc(n):t}function Fn(){return On("fantasy-land/empty")}S.concat=S.or;S.empty=Fn;S.of=Te;S["fantasy-land/ap"]=S.ap;S["fantasy-land/chain"]=S.chain;S["fantasy-land/concat"]=S.concat;S["fantasy-land/empty"]=S.empty;S["fantasy-land/of"]=S.of;S["fantasy-land/map"]=S.map;var Ke=g(function(n,e){return $(e,et(n,e))}),br=g(function(n,e){return e>=n.length?V(e,"any character/byte"):$(e+1,bn(n,e))}),vr=g(function(n,e){return $(n.length,n.slice(e))}),$n=g(function(n,e){return e<n.length?V(e,"EOF"):$(e,null)}),Ir=h(/[0-9]/).desc("a digit"),Or=h(/[0-9]*/).desc("optional digits"),xr=h(/[a-z]/i).desc("a letter"),Pr=h(/[a-z]*/i).desc("optional letters"),Sr=h(/\s*/).desc("optional whitespace"),Ur=h(/\s+/).desc("whitespace"),ut=ke("\r"),at=ke(`
`),st=ke(`\r
`),ct=In(st,at,ut).desc("newline"),wr=In(ct,$n);g.all=vr;g.alt=In;g.any=br;g.cr=ut;g.createLanguage=fr;g.crlf=st;g.custom=yr;g.digit=Ir;g.digits=Or;g.empty=Fn;g.end=wr;g.eof=$n;g.fail=On;g.formatError=nt;g.index=Ke;g.isParser=$e;g.lazy=ot;g.letter=xr;g.letters=Pr;g.lf=at;g.lookahead=yn;g.makeFailure=V;g.makeSuccess=$;g.newline=ct;g.noneOf=dr;g.notFollowedBy=it;g.of=Te;g.oneOf=Tr;g.optWhitespace=Sr;g.Parser=g;g.range=mr;g.regex=h;g.regexp=h;g.sepBy=rt;g.sepBy1=Cn;g.seq=vn;g.seqMap=pe;g.seqObj=lr;g.string=ke;g.succeed=Te;g.takeWhile=gr;g.test=xn;g.whitespace=Ur;g["fantasy-land/empty"]=Fn;g["fantasy-land/of"]=Te;g.Binary={bitSeq:hn,bitSeqObj:_t,byte:pr,buffer:Vt,encodedString:Ht,uintBE:sn,uint8BE:sn(1),uint16BE:sn(2),uint32BE:sn(4),uintLE:cn,uint8LE:cn(1),uint16LE:cn(2),uint32LE:cn(4),intBE:ln,int8BE:ln(1),int16BE:ln(2),int32BE:ln(4),intLE:fn,int8LE:fn(1),int16LE:fn(2),int32LE:fn(4),floatBE:Zt(),floatLE:Wt(),doubleBE:Xt(),doubleLE:Qt()};lt.exports=g});var j=ae(ce(),1),At=j.Type.Object({messageId:j.Type.String(),position:j.Type.Object({start:j.Type.Object({line:j.Type.Number(),character:j.Type.Number()}),end:j.Type.Object({line:j.Type.Number(),character:j.Type.Number()})})}),Nr=j.Type.Object({messageReferenceMatchers:j.Type.Array(j.Type.Function([j.Type.Object({documentText:j.Type.String()})],j.Type.Promise(j.Type.Array(At)))),extractMessageOptions:j.Type.Array(j.Type.Object({callback:j.Type.Function([j.Type.Object({messageId:j.Type.String(),selection:j.Type.String()})],j.Type.Object({messageId:j.Type.String(),messageReplacement:j.Type.String()}))})),documentSelectors:j.Type.Optional(j.Type.Array(j.Type.Object({language:j.Type.Optional(j.Type.String())})))});var _=ae(ce(),1);var qn=ae(ce(),1),_n="^((?<grandfathered>(en-GB-oed|i-ami|i-bnn|i-default|i-enochian|i-hak|i-klingon|i-lux|i-mingo|i-navajo|i-pwn|i-tao|i-tay|i-tsu|sgn-BE-FR|sgn-BE-NL|sgn-CH-DE)|(art-lojban|cel-gaulish|no-bok|no-nyn|zh-guoyu|zh-hakka|zh-min|zh-min-nan|zh-xiang))|((?<language>([A-Za-z]{2,3}(-(?<extlang>[A-Za-z]{3}(-[A-Za-z]{3}){0,2}))?))(-(?<script>[A-Za-z]{4}))?(-(?<region>[A-Za-z]{2}|[0-9]{3}))?(-(?<variant>[A-Za-z0-9]{5,8}|[0-9][A-Za-z0-9]{3}))*))$",Be=qn.Type.String({pattern:_n,examples:["en","de","en-US","zh-Hans","es-419"]});var je=ae(ce(),1),an=n=>je.Type.Union([n,je.Type.Intersect([je.Type.Object({en:n}),je.Type.Record(Be,n)])]);var Nt=_.Type.Object({id:_.Type.String({pattern:"^plugin\\.([a-z][a-zA-Z0-9]*)\\.([a-z][a-zA-Z0-9]*(?:[A-Z][a-z0-9]*)*)$",examples:["plugin.namespace.id"]}),displayName:an(_.Type.String()),description:an(_.Type.String()),settingsSchema:_.Type.Optional(_.Type.Object({},{additionalProperties:!0})),loadMessages:_.Type.Optional(_.Type.Any()),saveMessages:_.Type.Optional(_.Type.Any()),detectedLanguageTags:_.Type.Optional(_.Type.Any()),addCustomApi:_.Type.Optional(_.Type.Any())});var K=ae(ce(),1),Bt=K.Type.Object({type:K.Type.Literal("Text"),value:K.Type.String()}),jt=K.Type.Object({type:K.Type.Literal("VariableReference"),name:K.Type.String()}),Vn=K.Type.Union([jt]),Ct=K.Type.Array(K.Type.Union([Bt,Vn])),Ft=K.Type.Object({languageTag:Be,match:K.Type.Array(K.Type.String()),pattern:Ct}),Qr=K.Type.Object({id:K.Type.String(),alias:K.Type.Record(K.Type.String(),K.Type.String()),selectors:K.Type.Array(Vn),variants:K.Type.Array(Ft)});var Jn={en:"t-function JSX hybrid matcher"},Zn={en:"t-function JSX hybrid matcher"};var X=ae(ce(),1),Wn=X.Type.Object({preferredTfuncName:X.Type.Optional(X.Type.String({title:"Preferred t-function name",description:'The t("key") function name to use when extracting a new string.',default:"t",examples:["t","translate","i18n.t"]})),recognizedTfuncNames:X.Type.Optional(X.Type.Array(X.Type.String(),{title:"Recognized t-function names",description:'Array of recognized t("key") function names (to show inline previews of messages)',default:["t"],examples:["t","translate","i18n.t"]})),recognizedJSXAttributes:X.Type.Optional(X.Type.Array(X.Type.String(),{title:"Recognized JSX attributes",description:"which JSX attributes should be recognized as translate ones",default:[],examples:["tx","subTx"]}))});var E=ae(ft(),1);function Er(n,e){return E.default.createLanguage({entry:o=>E.default.alt(E.default.alt(o.FunctionCall,o.JSXAttribute),E.default.any).many().map(f=>f.flat().filter(c=>typeof c=="object")),stringLiteral:o=>E.default.alt(o.doubleQuotedString,o.singleQuotedString),doubleQuotedString:()=>E.default.string('"').then(E.default.regex(/[^"]*/)).skip(E.default.string('"')),singleQuotedString:()=>E.default.string("'").then(E.default.regex(/[^']*/)).skip(E.default.string("'")),FunctionCall:function(o){return E.default.seqMap(E.default.regex(/[^a-zA-Z0-9]/),E.default.alt(...n.map(E.default.string)),E.default.string("("),E.default.index,o.stringLiteral,E.default.index,E.default.regex(/[^)]*/),E.default.string(")"),(f,c,l,p,d,m)=>({messageId:d,position:{start:{line:p.line,character:p.column},end:{line:m.line,character:m.column}}}))},attributeValueParser:o=>E.default.seqMap(o.stringLiteral.or(E.default.lazy(()=>E.default.string("{").then(E.default.alt(o.stringLiteral,o.JSXAttribute)).skip(E.default.string("}")))),f=>typeof f=="string"?f:!1),JSXAttribute:function(o){return E.default.seqMap(E.default.string("<"),E.default.regex(/[A-Z][\w-]*/),E.default.regex(/\s+/),E.default.index,E.default.sepBy1(E.default.seq(E.default.regex(/\w+/).skip(E.default.regex(/\s*=\s*/)),o.attributeValueParser),E.default.regex(/\s+/)),E.default.index,(f,c,l,p,d,m)=>{let b=[];for(let[v,P]of d)e.includes(v)&&b.push({messageId:P,position:{start:{line:p.line,character:p.column},end:{line:m.line,character:m.column}}});return b.length>0?b:!1})}})}function pt(n,e){try{return Er(e?.recognizedTfuncNames??["t"],e?.recognizedJSXAttributes??[""]).entry.tryParse(n)}catch{return[]}}var Tt=n=>({"app.inlang.ideExtension":{messageReferenceMatchers:[async e=>pt(e.documentText,n)],extractMessageOptions:[{callback:e=>({messageId:e.messageId,messageReplacement:`"${e.messageId}"`})},{callback:e=>({messageId:e.messageId,messageReplacement:`${n?.preferredTfuncName??"t"}("${e.messageId}")`})},{callback:e=>({messageId:e.messageId,messageReplacement:`{${n?.preferredTfuncName??"t"}("${e.messageId}")}`})}],documentSelectors:[{language:"typescriptreact"},{language:"javascript"},{language:"typescript"},{language:"svelte"},{language:"astro"},{language:"vue"}]}});var Lr="plugin.minibits.inlangmatcher",dt={id:Lr,displayName:Jn,description:Zn,settingsSchema:Wn,addCustomApi:({settings:n})=>Tt(n["plugin.minibits.inlangmatcher"])};var Oi=dt;export{Oi as default};
